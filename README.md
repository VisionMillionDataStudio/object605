# è½¦è¾†è¡Œäººè½¬å‘æ„å›¾çŠ¶æ€æ£€æµ‹æ£€æµ‹ç³»ç»Ÿæºç åˆ†äº«
 # [ä¸€æ¡é¾™æ•™å­¦YOLOV8æ ‡æ³¨å¥½çš„æ•°æ®é›†ä¸€é”®è®­ç»ƒ_70+å…¨å¥—æ”¹è¿›åˆ›æ–°ç‚¹å‘åˆŠ_Webå‰ç«¯å±•ç¤º]

### 1.ç ”ç©¶èƒŒæ™¯ä¸æ„ä¹‰

é¡¹ç›®å‚è€ƒ[AAAI Association for the Advancement of Artificial Intelligence](https://gitee.com/qunmasj/projects)

é¡¹ç›®æ¥æº[AACV Association for the Advancement of Computer Vision](https://kdocs.cn/l/cszuIiCKVNis)

ç ”ç©¶èƒŒæ™¯ä¸æ„ä¹‰

éšç€åŸå¸‚åŒ–è¿›ç¨‹çš„åŠ å¿«ï¼Œäº¤é€šæ‹¥å µã€äº¤é€šäº‹æ•…é¢‘å‘ç­‰é—®é¢˜æ—¥ç›Šä¸¥é‡ï¼Œç»™åŸå¸‚äº¤é€šç®¡ç†å¸¦æ¥äº†å·¨å¤§çš„æŒ‘æˆ˜ã€‚è½¦è¾†ä¸è¡Œäººä¹‹é—´çš„äº’åŠ¨å…³ç³»æ—¥ç›Šå¤æ‚ï¼Œå°¤å…¶æ˜¯åœ¨äº¤å‰è·¯å£ã€è¡Œäººè¿‡è¡—é“ç­‰å…³é”®åœºæ™¯ä¸­ï¼Œå¦‚ä½•å‡†ç¡®è¯†åˆ«å’Œé¢„æµ‹è½¦è¾†åŠè¡Œäººçš„è½¬å‘æ„å›¾çŠ¶æ€ï¼Œæˆä¸ºæå‡äº¤é€šå®‰å…¨å’Œæ•ˆç‡çš„é‡è¦è¯¾é¢˜ã€‚ä¼ ç»Ÿçš„äº¤é€šç›‘æ§æ‰‹æ®µå¾€å¾€ä¾èµ–äºäººå·¥è§‚å¯Ÿå’Œç®€å•çš„ä¼ æ„Ÿå™¨ï¼Œéš¾ä»¥å®ç°å®æ—¶ã€å‡†ç¡®çš„çŠ¶æ€æ£€æµ‹ã€‚å› æ­¤ï¼ŒåŸºäºè®¡ç®—æœºè§†è§‰å’Œæ·±åº¦å­¦ä¹ æŠ€æœ¯çš„æ™ºèƒ½äº¤é€šç³»ç»Ÿé€æ¸æˆä¸ºç ”ç©¶çš„çƒ­ç‚¹ã€‚

YOLOï¼ˆYou Only Look Onceï¼‰ç³»åˆ—ç›®æ ‡æ£€æµ‹ç®—æ³•å› å…¶é«˜æ•ˆæ€§å’Œå‡†ç¡®æ€§ï¼Œå¹¿æ³›åº”ç”¨äºå®æ—¶ç›®æ ‡æ£€æµ‹ä»»åŠ¡ã€‚YOLOv8ä½œä¸ºè¯¥ç³»åˆ—çš„æœ€æ–°ç‰ˆæœ¬ï¼Œå…·å¤‡æ›´å¼ºçš„ç‰¹å¾æå–èƒ½åŠ›å’Œæ›´å¿«çš„æ¨ç†é€Ÿåº¦ï¼Œé€‚åˆåœ¨å¤æ‚çš„äº¤é€šåœºæ™¯ä¸­è¿›è¡Œè½¦è¾†å’Œè¡Œäººçš„çŠ¶æ€æ£€æµ‹ã€‚ç„¶è€Œï¼Œç°æœ‰çš„YOLOv8æ¨¡å‹åœ¨å¤„ç†è½¦è¾†å’Œè¡Œäººè½¬å‘æ„å›¾çš„æ£€æµ‹æ—¶ï¼Œä»å­˜åœ¨ä¸€å®šçš„å±€é™æ€§ï¼Œå°¤å…¶æ˜¯åœ¨å¤æ‚èƒŒæ™¯ã€é®æŒ¡ç‰©ä»¥åŠå¤šç›®æ ‡æƒ…å†µä¸‹çš„è¯†åˆ«ç²¾åº¦æœ‰å¾…æé«˜ã€‚å› æ­¤ï¼Œæ”¹è¿›YOLOv8ä»¥é€‚åº”è½¦è¾†è¡Œäººè½¬å‘æ„å›¾çŠ¶æ€æ£€æµ‹çš„éœ€æ±‚ï¼Œå…·æœ‰é‡è¦çš„ç†è®ºå’Œå®è·µæ„ä¹‰ã€‚

æœ¬ç ”ç©¶å°†åˆ©ç”¨åŒ…å«2100å¼ å›¾åƒçš„å¤šç±»åˆ«æ•°æ®é›†ï¼Œæ¶µç›–äº†125ä¸ªç±»åˆ«ï¼ŒåŒ…æ‹¬äº¤é€šæ ‡å¿—ã€é“è·¯æŒ‡ç¤ºã€è¡Œäººã€è½¦è¾†ç­‰å¤šç§å…ƒç´ ã€‚è¿™äº›ç±»åˆ«ä¸ä»…ä¸ºæ¨¡å‹æä¾›äº†ä¸°å¯Œçš„è®­ç»ƒæ ·æœ¬ï¼Œè¿˜èƒ½æœ‰æ•ˆå¢å¼ºæ¨¡å‹å¯¹å¤æ‚äº¤é€šåœºæ™¯çš„é€‚åº”èƒ½åŠ›ã€‚é€šè¿‡å¯¹æ•°æ®é›†çš„æ·±å…¥åˆ†æï¼Œæˆ‘ä»¬å¯ä»¥æå–å‡ºä¸è½¦è¾†å’Œè¡Œäººè½¬å‘æ„å›¾ç›¸å…³çš„ç‰¹å¾ä¿¡æ¯ï¼Œä»è€Œæå‡æ¨¡å‹çš„æ£€æµ‹ç²¾åº¦ã€‚æ­¤å¤–ï¼Œæ•°æ®é›†ä¸­åŒ…å«çš„å¤šç§äº¤é€šæŒ‡ç¤ºæ ‡å¿—å’Œåœºæ™¯ä¿¡æ¯ï¼Œå°†ä¸ºæ¨¡å‹æä¾›æ›´ä¸ºå…¨é¢çš„ä¸Šä¸‹æ–‡ç†è§£èƒ½åŠ›ï¼Œä½¿å…¶èƒ½å¤Ÿåœ¨ä¸åŒçš„äº¤é€šç¯å¢ƒä¸­åšå‡ºæ›´ä¸ºå‡†ç¡®çš„åˆ¤æ–­ã€‚

åœ¨ç ”ç©¶çš„æ„ä¹‰ä¸Šï¼ŒåŸºäºæ”¹è¿›YOLOv8çš„è½¦è¾†è¡Œäººè½¬å‘æ„å›¾çŠ¶æ€æ£€æµ‹ç³»ç»Ÿï¼Œä¸ä»…å¯ä»¥æé«˜äº¤é€šç›‘æ§çš„æ™ºèƒ½åŒ–æ°´å¹³ï¼Œè¿˜èƒ½ä¸ºæ™ºèƒ½äº¤é€šç³»ç»Ÿçš„å»ºè®¾æä¾›æŠ€æœ¯æ”¯æŒã€‚é€šè¿‡å®æ—¶æ£€æµ‹å’Œé¢„æµ‹è½¦è¾†ä¸è¡Œäººçš„è½¬å‘æ„å›¾ï¼Œèƒ½å¤Ÿæœ‰æ•ˆå‡å°‘äº¤é€šäº‹æ•…çš„å‘ç”Ÿï¼Œæå‡é“è·¯å®‰å…¨æ€§ã€‚åŒæ—¶ï¼Œè¯¥ç³»ç»Ÿçš„åº”ç”¨è¿˜å¯ä»¥ä¸ºäº¤é€šç®¡ç†éƒ¨é—¨æä¾›å†³ç­–æ”¯æŒï¼Œä¼˜åŒ–äº¤é€šä¿¡å·æ§åˆ¶ï¼Œç¼“è§£äº¤é€šæ‹¥å µï¼Œæå‡åŸå¸‚äº¤é€šçš„æ•´ä½“æ•ˆç‡ã€‚

ç»¼ä¸Šæ‰€è¿°ï¼Œæœ¬ç ”ç©¶åœ¨æŠ€æœ¯åˆ›æ–°å’Œå®é™…åº”ç”¨æ–¹é¢å…·æœ‰é‡è¦çš„æ„ä¹‰ã€‚é€šè¿‡æ”¹è¿›YOLOv8æ¨¡å‹ï¼Œç»“åˆä¸°å¯Œçš„æ•°æ®é›†ä¿¡æ¯ï¼Œæ—¨åœ¨æ„å»ºä¸€ä¸ªé«˜æ•ˆã€å‡†ç¡®çš„è½¦è¾†è¡Œäººè½¬å‘æ„å›¾çŠ¶æ€æ£€æµ‹ç³»ç»Ÿï¼Œä¸ºæ™ºèƒ½äº¤é€šçš„å‘å±•è´¡çŒ®æ–°çš„æ€è·¯å’Œæ–¹æ³•ã€‚

### 2.å›¾ç‰‡æ¼”ç¤º

![1.png](1.png)

![2.png](2.png)

![3.png](3.png)

##### æ³¨æ„ï¼šç”±äºæ­¤åšå®¢ç¼–è¾‘è¾ƒæ—©ï¼Œä¸Šé¢â€œ2.å›¾ç‰‡æ¼”ç¤ºâ€å’Œâ€œ3.è§†é¢‘æ¼”ç¤ºâ€å±•ç¤ºçš„ç³»ç»Ÿå›¾ç‰‡æˆ–è€…è§†é¢‘å¯èƒ½ä¸ºè€ç‰ˆæœ¬ï¼Œæ–°ç‰ˆæœ¬åœ¨è€ç‰ˆæœ¬çš„åŸºç¡€ä¸Šå‡çº§å¦‚ä¸‹ï¼šï¼ˆå®é™…æ•ˆæœä»¥å‡çº§çš„æ–°ç‰ˆæœ¬ä¸ºå‡†ï¼‰

  ï¼ˆ1ï¼‰é€‚é…äº†YOLOV8çš„â€œç›®æ ‡æ£€æµ‹â€æ¨¡å‹å’Œâ€œå®ä¾‹åˆ†å‰²â€æ¨¡å‹ï¼Œé€šè¿‡åŠ è½½ç›¸åº”çš„æƒé‡ï¼ˆ.ptï¼‰æ–‡ä»¶å³å¯è‡ªé€‚åº”åŠ è½½æ¨¡å‹ã€‚

  ï¼ˆ2ï¼‰æ”¯æŒâ€œå›¾ç‰‡è¯†åˆ«â€ã€â€œè§†é¢‘è¯†åˆ«â€ã€â€œæ‘„åƒå¤´å®æ—¶è¯†åˆ«â€ä¸‰ç§è¯†åˆ«æ¨¡å¼ã€‚

  ï¼ˆ3ï¼‰æ”¯æŒâ€œå›¾ç‰‡è¯†åˆ«â€ã€â€œè§†é¢‘è¯†åˆ«â€ã€â€œæ‘„åƒå¤´å®æ—¶è¯†åˆ«â€ä¸‰ç§è¯†åˆ«ç»“æœä¿å­˜å¯¼å‡ºï¼Œè§£å†³æ‰‹åŠ¨å¯¼å‡ºï¼ˆå®¹æ˜“å¡é¡¿å‡ºç°çˆ†å†…å­˜ï¼‰å­˜åœ¨çš„é—®é¢˜ï¼Œè¯†åˆ«å®Œè‡ªåŠ¨ä¿å­˜ç»“æœå¹¶å¯¼å‡ºåˆ°tempDirä¸­ã€‚

  ï¼ˆ4ï¼‰æ”¯æŒWebå‰ç«¯ç³»ç»Ÿä¸­çš„æ ‡é¢˜ã€èƒŒæ™¯å›¾ç­‰è‡ªå®šä¹‰ä¿®æ”¹ï¼Œåé¢æä¾›ä¿®æ”¹æ•™ç¨‹ã€‚

  å¦å¤–æœ¬é¡¹ç›®æä¾›è®­ç»ƒçš„æ•°æ®é›†å’Œè®­ç»ƒæ•™ç¨‹,æš‚ä¸æä¾›æƒé‡æ–‡ä»¶ï¼ˆbest.ptï¼‰,éœ€è¦æ‚¨æŒ‰ç…§æ•™ç¨‹è¿›è¡Œè®­ç»ƒåå®ç°å›¾ç‰‡æ¼”ç¤ºå’ŒWebå‰ç«¯ç•Œé¢æ¼”ç¤ºçš„æ•ˆæœã€‚

### 3.è§†é¢‘æ¼”ç¤º

[3.1 è§†é¢‘æ¼”ç¤º](https://www.bilibili.com/video/BV1TktUe2Eiw/)

### 4.æ•°æ®é›†ä¿¡æ¯å±•ç¤º

##### 4.1 æœ¬é¡¹ç›®æ•°æ®é›†è¯¦ç»†æ•°æ®ï¼ˆç±»åˆ«æ•°ï¼†ç±»åˆ«åï¼‰

nc: 98
names: ['Airplanes', 'Beginning_of_center_divider', 'Bicycles', 'Both_ways', 'Curve_to_right', 'Curving_left', 'Danger', 'Double_curve_left', 'Double_curve_right', 'Downward_slope', 'Drive_both_sides', 'Drive_to_the_right', 'End_of_center_divider_side', 'Falling_rocks', 'Four-way_intersection', 'Indication_Bicycle_crossing', 'Indication_Bicycle_parking_area', 'Indication_Bicycles_only', 'Indication_Bus_only_lane', 'Indication_Children_Protection', 'Indication_Drive_both_the_right', 'Indication_Drive_on_the_left', 'Indication_Drive_on_the_right', 'Indication_Go_straight_or_left_turn', 'Indication_Go_straight_or_right_turn', 'Indication_HOV_Lane', 'Indication_Left_or_right_turn', 'Indication_Make_left_turn', 'Indication_Make_right_turn', 'Indication_One_way_left', 'Indication_One_way_right', 'Indication_One_way_straight', 'Indication_Parking_area', 'Indication_Pedestrian_crossing', 'Indication_Pedestrian_only', 'Indication_Priority', 'Indication_Proceeding_direction', 'Indication_Roundabout_straight', 'Indication_Safety_area', 'Indication_Safety_for_children', 'Indication_Unprotected_left_turn', 'Indication_Use_the_snow_tire_chain', 'Indication_Vehicles_only', 'Indication_for_bicycles_and_pedestrians', 'Indication_u-turn_ways', 'Left_lane_is_merged', 'Merge_left', 'Merge_right', 'Narrow_road_ahead', 'Pedestrian_crossing', 'Poth-hole', 'Prionity', 'Railroad_crossing', 'Right_lane_is_merged', 'Riverside_drive', 'Road_construction', 'Rough_road_condition', 'Roundabout', 'Safety_for_children', 'Safety_for_wild_animals', 'Slippery_road', 'Speed_bump_ahead', 'T-shaped_intersection', 'Traffic_signal', 'Tree-way_intersection_left', 'Tree-way_intersection_right', 'Tunnel', 'Upward_slope', 'Wet_road_condition', 'Wind', 'Y-shaped_intersection', 'apple', 'banana', 'book', 'bottle', 'car', 'cars', 'cat', 'cycle', 'dog', 'grape', 'indication_protection_of_the_disabled', 'indication_protection_of_the_elderly', 'laptop', 'orange', 'person', 'regulatory_Distance_between_the_vehicles', 'regulatory_Drive_slowly', 'regulatory_Maximum_Speed_limit', 'regulatory_No_left_turn', 'regulatory_No_parking', 'regulatory_No_passage', 'regulatory_No_right_turn', 'regulatory_No_stop_or_parking', 'regulatory_Stop', 'regulatory_Yield', 'traffic sign', 'trafficlight']


##### 4.2 æœ¬é¡¹ç›®æ•°æ®é›†ä¿¡æ¯ä»‹ç»

æ•°æ®é›†ä¿¡æ¯å±•ç¤º

åœ¨æ„å»ºæ”¹è¿›YOLOv8çš„è½¦è¾†è¡Œäººè½¬å‘æ„å›¾çŠ¶æ€æ£€æµ‹ç³»ç»Ÿçš„è¿‡ç¨‹ä¸­ï¼Œæ‰€ä½¿ç”¨çš„æ•°æ®é›†åä¸ºâ€œobjectâ€ã€‚è¯¥æ•°æ®é›†çš„è®¾è®¡æ—¨åœ¨ä¸ºè‡ªåŠ¨é©¾é©¶å’Œæ™ºèƒ½äº¤é€šç³»ç»Ÿæä¾›ä¸°å¯Œçš„è§†è§‰ä¿¡æ¯ï¼Œä»¥ä¾¿æ›´å¥½åœ°ç†è§£å’Œé¢„æµ‹è½¦è¾†åŠè¡Œäººçš„è¡Œä¸ºã€‚æ•°æ®é›†åŒ…å«98ä¸ªç±»åˆ«ï¼Œæ¶µç›–äº†å¤šç§äº¤é€šæ ‡å¿—ã€é“è·¯çŠ¶å†µã€äº¤é€šå·¥å…·åŠå…¶ä»–ç›¸å…³å¯¹è±¡ï¼Œæå¤§åœ°å¢å¼ºäº†æ¨¡å‹çš„å­¦ä¹ èƒ½åŠ›å’Œæ³›åŒ–èƒ½åŠ›ã€‚

é¦–å…ˆï¼Œæ•°æ®é›†ä¸­åŒ…æ‹¬äº†å¤šç§äº¤é€šæ ‡å¿—å’ŒæŒ‡ç¤ºï¼Œè¯¸å¦‚â€œIndication_Go_straight_or_left_turnâ€ã€â€œIndication_Pedestrian_crossingâ€å’Œâ€œIndication_Safety_areaâ€ç­‰ã€‚è¿™äº›ç±»åˆ«çš„å­˜åœ¨ä½¿å¾—æ¨¡å‹èƒ½å¤Ÿè¯†åˆ«å‡ºé“è·¯ä¸Šçš„å„ç§æŒ‡ç¤ºä¿¡æ¯ï¼Œä»è€Œåœ¨å¤æ‚çš„äº¤é€šç¯å¢ƒä¸­åšå‡ºæ›´ä¸ºå‡†ç¡®çš„å†³ç­–ã€‚ä¾‹å¦‚ï¼Œå½“è½¦è¾†æ¥è¿‘ä¸€ä¸ªäººè¡Œæ¨ªé“æ—¶ï¼Œæ¨¡å‹èƒ½å¤ŸåŠæ—¶è¯†åˆ«å‡ºâ€œIndication_Pedestrian_crossingâ€æ ‡å¿—ï¼Œå¹¶åšå‡ºç›¸åº”çš„å‡é€Ÿæˆ–åœè½¦çš„ååº”ã€‚è¿™å¯¹äºæé«˜è¡Œäººå®‰å…¨å’Œå‡å°‘äº¤é€šäº‹æ•…çš„å‘ç”Ÿå…·æœ‰é‡è¦æ„ä¹‰ã€‚

æ­¤å¤–ï¼Œæ•°æ®é›†ä¸­è¿˜åŒ…å«äº†ä¸é“è·¯çŠ¶å†µç›¸å…³çš„ç±»åˆ«ï¼Œå¦‚â€œSlippery_roadâ€ã€â€œPoth-holeâ€å’Œâ€œRough_road_conditionâ€ã€‚è¿™äº›ç±»åˆ«çš„å¼•å…¥ä½¿å¾—æ¨¡å‹ä¸ä»…èƒ½å¤Ÿè¯†åˆ«é™æ€çš„äº¤é€šæ ‡å¿—ï¼Œè¿˜èƒ½æ„ŸçŸ¥åŠ¨æ€çš„é“è·¯ç¯å¢ƒå˜åŒ–ã€‚è¿™ç§èƒ½åŠ›åœ¨å®é™…åº”ç”¨ä¸­å°¤ä¸ºé‡è¦ï¼Œå› ä¸ºé“è·¯æ¡ä»¶çš„å˜åŒ–å¯èƒ½ä¼šç›´æ¥å½±å“è½¦è¾†çš„è¡Œé©¶å®‰å…¨å’Œè¡Œé©¶ç­–ç•¥ã€‚ä¾‹å¦‚ï¼Œåœ¨è¯†åˆ«åˆ°â€œSlippery_roadâ€æ—¶ï¼Œç³»ç»Ÿå¯ä»¥è‡ªåŠ¨è°ƒæ•´è½¦è¾†çš„è¡Œé©¶é€Ÿåº¦å’Œæ“æ§æ–¹å¼ï¼Œä»¥é™ä½äº‹æ•…é£é™©ã€‚

åœ¨äº¤é€šå·¥å…·çš„åˆ†ç±»æ–¹é¢ï¼Œæ•°æ®é›†åŒæ ·æä¾›äº†ä¸°å¯Œçš„é€‰æ‹©ï¼ŒåŒ…æ‹¬â€œcarâ€ã€â€œbicycleâ€ã€â€œpersonâ€ç­‰ã€‚è¿™äº›ç±»åˆ«çš„å¤šæ ·æ€§ä½¿å¾—æ¨¡å‹èƒ½å¤Ÿåœ¨å¤æ‚çš„äº¤é€šåœºæ™¯ä¸­æœ‰æ•ˆåŒºåˆ†ä¸åŒç±»å‹çš„äº¤é€šå‚ä¸è€…ï¼Œä»è€Œæ›´å¥½åœ°ç†è§£å…¶è¡Œä¸ºæ„å›¾ã€‚ä¾‹å¦‚ï¼Œè¯†åˆ«åˆ°â€œbicycleâ€åï¼Œç³»ç»Ÿå¯ä»¥é¢„æµ‹éª‘è¡Œè€…å¯èƒ½çš„è½¬å‘è¡Œä¸ºï¼Œä»è€Œæå‰åšå‡ºååº”ï¼Œé¿å…æ½œåœ¨çš„ç¢°æ’ã€‚

æ•°æ®é›†ä¸­çš„ç±»åˆ«è¿˜åŒ…æ‹¬äº†ä¸€äº›ç‰¹å®šçš„äº¤é€šæ³•è§„æŒ‡ç¤ºï¼Œå¦‚â€œregulatory_No_left_turnâ€ã€â€œregulatory_Maximum_Speed_limitâ€ç­‰ã€‚è¿™äº›ç±»åˆ«çš„å­˜åœ¨ä¸ä»…ä¸ºæ¨¡å‹æä¾›äº†äº¤é€šè§„åˆ™çš„èƒŒæ™¯çŸ¥è¯†ï¼Œè¿˜ä½¿å¾—æ¨¡å‹èƒ½å¤Ÿåœ¨ç‰¹å®šæƒ…å†µä¸‹åšå‡ºåˆè§„çš„å†³ç­–ã€‚ä¾‹å¦‚ï¼Œå½“è½¦è¾†æ¥è¿‘ä¸€ä¸ªç¦æ­¢å·¦è½¬çš„è·¯å£æ—¶ï¼Œç³»ç»Ÿèƒ½å¤Ÿè¯†åˆ«å‡ºâ€œregulatory_No_left_turnâ€æ ‡å¿—ï¼Œå¹¶è‡ªåŠ¨è°ƒæ•´è¡Œé©¶è·¯çº¿ï¼Œç¡®ä¿éµå®ˆäº¤é€šæ³•è§„ã€‚

æœ€åï¼Œæ•°æ®é›†è¿˜åŒ…å«äº†ä¸€äº›æ—¥å¸¸ç‰©å“çš„ç±»åˆ«ï¼Œå¦‚â€œappleâ€ã€â€œbananaâ€ã€â€œlaptopâ€ç­‰ï¼Œè¿™äº›ç±»åˆ«çš„å¼•å…¥è™½ç„¶ä¸äº¤é€šç›´æ¥ç›¸å…³æ€§è¾ƒä½ï¼Œä½†åœ¨æŸäº›ç‰¹å®šåœºæ™¯ä¸‹ï¼Œå¯èƒ½ä¼šå¯¹æ¨¡å‹çš„å­¦ä¹ å’Œè¯†åˆ«èƒ½åŠ›äº§ç”Ÿç§¯æå½±å“ã€‚è¿™ç§å¤šæ ·æ€§ä½¿å¾—æ¨¡å‹åœ¨å¤„ç†ä¸åŒç±»å‹çš„è¾“å…¥æ—¶ï¼Œèƒ½å¤Ÿä¿æŒæ›´é«˜çš„çµæ´»æ€§å’Œé€‚åº”æ€§ã€‚

ç»¼ä¸Šæ‰€è¿°ï¼Œæ•°æ®é›†â€œobjectâ€é€šè¿‡å…¶ä¸°å¯Œçš„ç±»åˆ«è®¾ç½®ï¼Œä¸ºæ”¹è¿›YOLOv8çš„è½¦è¾†è¡Œäººè½¬å‘æ„å›¾çŠ¶æ€æ£€æµ‹ç³»ç»Ÿæä¾›äº†å¼ºæœ‰åŠ›çš„æ”¯æŒã€‚é€šè¿‡å¯¹å¤šç§äº¤é€šæ ‡å¿—ã€é“è·¯çŠ¶å†µå’Œäº¤é€šå·¥å…·çš„å…¨é¢è¦†ç›–ï¼Œè¯¥æ•°æ®é›†ä¸ä»…å¢å¼ºäº†æ¨¡å‹çš„è¯†åˆ«èƒ½åŠ›ï¼Œè¿˜æå‡äº†å…¶åœ¨å¤æ‚äº¤é€šç¯å¢ƒä¸­çš„å†³ç­–èƒ½åŠ›ï¼Œä¸ºæœªæ¥çš„æ™ºèƒ½äº¤é€šç³»ç»Ÿå¥ å®šäº†åšå®çš„åŸºç¡€ã€‚

![4.png](4.png)

![5.png](5.png)

![6.png](6.png)

![7.png](7.png)

![8.png](8.png)

### 5.å…¨å¥—é¡¹ç›®ç¯å¢ƒéƒ¨ç½²è§†é¢‘æ•™ç¨‹ï¼ˆé›¶åŸºç¡€æ‰‹æŠŠæ‰‹æ•™å­¦ï¼‰

[5.1 ç¯å¢ƒéƒ¨ç½²æ•™ç¨‹é“¾æ¥ï¼ˆé›¶åŸºç¡€æ‰‹æŠŠæ‰‹æ•™å­¦ï¼‰](https://www.ixigua.com/7404473917358506534?logTag=c807d0cbc21c0ef59de5)




[5.2 å®‰è£…Pythonè™šæ‹Ÿç¯å¢ƒåˆ›å»ºå’Œä¾èµ–åº“å®‰è£…è§†é¢‘æ•™ç¨‹é“¾æ¥ï¼ˆé›¶åŸºç¡€æ‰‹æŠŠæ‰‹æ•™å­¦ï¼‰](https://www.ixigua.com/7404474678003106304?logTag=1f1041108cd1f708b01a)

### 6.æ‰‹æŠŠæ‰‹YOLOV8è®­ç»ƒè§†é¢‘æ•™ç¨‹ï¼ˆé›¶åŸºç¡€å°ç™½æœ‰æ‰‹å°±èƒ½å­¦ä¼šï¼‰

[6.1 æ‰‹æŠŠæ‰‹YOLOV8è®­ç»ƒè§†é¢‘æ•™ç¨‹ï¼ˆé›¶åŸºç¡€å°ç™½æœ‰æ‰‹å°±èƒ½å­¦ä¼šï¼‰](https://www.ixigua.com/7404477157818401292?logTag=d31a2dfd1983c9668658)

### 7.70+ç§å…¨å¥—YOLOV8åˆ›æ–°ç‚¹ä»£ç åŠ è½½è°ƒå‚è§†é¢‘æ•™ç¨‹ï¼ˆä¸€é”®åŠ è½½å†™å¥½çš„æ”¹è¿›æ¨¡å‹çš„é…ç½®æ–‡ä»¶ï¼‰

[7.1 70+ç§å…¨å¥—YOLOV8åˆ›æ–°ç‚¹ä»£ç åŠ è½½è°ƒå‚è§†é¢‘æ•™ç¨‹ï¼ˆä¸€é”®åŠ è½½å†™å¥½çš„æ”¹è¿›æ¨¡å‹çš„é…ç½®æ–‡ä»¶ï¼‰](https://www.ixigua.com/7404478314661806627?logTag=29066f8288e3f4eea3a4)

### 8.70+ç§å…¨å¥—YOLOV8åˆ›æ–°ç‚¹åŸç†è®²è§£ï¼ˆéç§‘ç­ä¹Ÿå¯ä»¥è½»æ¾å†™åˆŠå‘åˆŠï¼ŒV10ç‰ˆæœ¬æ­£åœ¨ç§‘ç ”å¾…æ›´æ–°ï¼‰

ç”±äºç¯‡å¹…é™åˆ¶ï¼Œæ¯ä¸ªåˆ›æ–°ç‚¹çš„å…·ä½“åŸç†è®²è§£å°±ä¸ä¸€ä¸€å±•å¼€ï¼Œå…·ä½“è§ä¸‹åˆ—ç½‘å€ä¸­çš„åˆ›æ–°ç‚¹å¯¹åº”å­é¡¹ç›®çš„æŠ€æœ¯åŸç†åšå®¢ç½‘å€ã€Blogã€‘ï¼š

![9.png](9.png)

[8.1 70+ç§å…¨å¥—YOLOV8åˆ›æ–°ç‚¹åŸç†è®²è§£é“¾æ¥](https://gitee.com/qunmasj/good)

### 9.ç³»ç»ŸåŠŸèƒ½å±•ç¤ºï¼ˆæ£€æµ‹å¯¹è±¡ä¸ºä¸¾ä¾‹ï¼Œå®é™…å†…å®¹ä»¥æœ¬é¡¹ç›®æ•°æ®é›†ä¸ºå‡†ï¼‰

å›¾9.1.ç³»ç»Ÿæ”¯æŒæ£€æµ‹ç»“æœè¡¨æ ¼æ˜¾ç¤º

  å›¾9.2.ç³»ç»Ÿæ”¯æŒç½®ä¿¡åº¦å’ŒIOUé˜ˆå€¼æ‰‹åŠ¨è°ƒèŠ‚

  å›¾9.3.ç³»ç»Ÿæ”¯æŒè‡ªå®šä¹‰åŠ è½½æƒé‡æ–‡ä»¶best.pt(éœ€è¦ä½ é€šè¿‡æ­¥éª¤5ä¸­è®­ç»ƒè·å¾—)

  å›¾9.4.ç³»ç»Ÿæ”¯æŒæ‘„åƒå¤´å®æ—¶è¯†åˆ«

  å›¾9.5.ç³»ç»Ÿæ”¯æŒå›¾ç‰‡è¯†åˆ«

  å›¾9.6.ç³»ç»Ÿæ”¯æŒè§†é¢‘è¯†åˆ«

  å›¾9.7.ç³»ç»Ÿæ”¯æŒè¯†åˆ«ç»“æœæ–‡ä»¶è‡ªåŠ¨ä¿å­˜

  å›¾9.8.ç³»ç»Ÿæ”¯æŒExcelå¯¼å‡ºæ£€æµ‹ç»“æœæ•°æ®

![10.png](10.png)

![11.png](11.png)

![12.png](12.png)

![13.png](13.png)

![14.png](14.png)

![15.png](15.png)

![16.png](16.png)

![17.png](17.png)

### 10.åŸå§‹YOLOV8ç®—æ³•åŸç†

åŸå§‹YOLOv8ç®—æ³•åŸç†

YOLOv8ä½œä¸ºYOLOç³»åˆ—çš„æœ€æ–°ç‰ˆæœ¬ï¼Œæ ‡å¿—ç€ç›®æ ‡æ£€æµ‹æŠ€æœ¯çš„åˆä¸€æ¬¡é£è·ƒã€‚å®ƒåœ¨ä¿æŒé«˜æ•ˆæ€§çš„åŒæ—¶ï¼Œæ˜¾è‘—æå‡äº†æ£€æµ‹ç²¾åº¦å’Œé€Ÿåº¦ï¼Œæˆä¸ºè®¡ç®—æœºè§†è§‰é¢†åŸŸä¸­çš„ä¸€é¢—ç’€ç’¨æ˜ç ã€‚ä¸å…¶å‰èº«YOLOv5ç›¸æ¯”ï¼ŒYOLOv8ä¸ä»…åœ¨æ¨¡å‹ç»“æ„ä¸Šè¿›è¡Œäº†æ·±åº¦ä¼˜åŒ–ï¼Œè¿˜åœ¨ç®—æ³•è®¾è®¡ä¸Šå¼•å…¥äº†å¤šé¡¹åˆ›æ–°ï¼Œä½¿å…¶åœ¨å„ç§åº”ç”¨åœºæ™¯ä¸­å±•ç°å‡ºå“è¶Šçš„æ€§èƒ½ã€‚

YOLOv8çš„ç½‘ç»œç»“æ„å¯ä»¥åˆ†ä¸ºå››ä¸ªä¸»è¦éƒ¨åˆ†ï¼šè¾“å…¥ç«¯ã€éª¨å¹²ç½‘ç»œã€é¢ˆéƒ¨ç½‘ç»œå’Œå¤´éƒ¨ç½‘ç»œã€‚è¾“å…¥ç«¯çš„è®¾è®¡å°¤ä¸ºé‡è¦ï¼Œå®ƒé€šè¿‡é©¬èµ›å…‹æ•°æ®å¢å¼ºã€è‡ªé€‚åº”é”šæ¡†è®¡ç®—å’Œè‡ªé€‚åº”ç°åº¦å¡«å……ç­‰æŠ€æœ¯ï¼Œç¡®ä¿äº†è¾“å…¥æ•°æ®çš„å¤šæ ·æ€§å’Œé€‚åº”æ€§ã€‚è¿™ä¸€è¿‡ç¨‹ä¸ä»…æå‡äº†æ¨¡å‹çš„é²æ£’æ€§ï¼Œè¿˜ä¸ºåç»­çš„ç‰¹å¾æå–æ‰“ä¸‹äº†åšå®çš„åŸºç¡€ã€‚

åœ¨éª¨å¹²ç½‘ç»œæ–¹é¢ï¼ŒYOLOv8é‡‡ç”¨äº†C2fç»“æ„ï¼Œå–ä»£äº†YOLOv5ä¸­çš„C3æ¨¡å—ã€‚C2fæ¨¡å—é€šè¿‡å¼•å…¥æ›´å¤šçš„åˆ†æ”¯å’Œè·¨å±‚è¿æ¥ï¼Œå¢å¼ºäº†æ¢¯åº¦æµçš„ä¸°å¯Œæ€§ï¼Œä»è€Œæå‡äº†ç‰¹å¾è¡¨ç¤ºèƒ½åŠ›ã€‚è¿™ç§ç»“æ„çš„è®¾è®¡çµæ„Ÿæ¥æºäºYOLOv7çš„ELANç»“æ„ï¼Œå……åˆ†åˆ©ç”¨äº†æ®‹å·®ç‰¹å¾çš„å­¦ä¹ ï¼Œå½¢æˆäº†ä¸€ä¸ªæ›´ä¸ºå¼ºå¤§çš„ç¥ç»ç½‘ç»œæ¨¡å—ã€‚æ­¤å¤–ï¼ŒYOLOv8è¿˜å¼•å…¥äº†ç©ºé—´é‡‘å­—å¡”æ± åŒ–èåˆï¼ˆSPPFï¼‰ç»“æ„ï¼Œè¿›ä¸€æ­¥å¢å¼ºäº†å¯¹å¤šå°ºåº¦ç‰¹å¾çš„æ•æ‰èƒ½åŠ›ï¼Œä½¿å¾—æ¨¡å‹åœ¨å¤„ç†ä¸åŒå¤§å°ç›®æ ‡æ—¶è¡¨ç°å¾—æ›´åŠ å‡ºè‰²ã€‚

é¢ˆéƒ¨ç½‘ç»œåˆ™é‡‡ç”¨äº†è·¯å¾„èšåˆç½‘ç»œï¼ˆPANï¼‰ç»“æ„ï¼Œè¿™ä¸€è®¾è®¡æœ‰æ•ˆåœ°å¢å¼ºäº†ç½‘ç»œå¯¹ä¸åŒç¼©æ”¾å°ºåº¦å¯¹è±¡çš„ç‰¹å¾èåˆèƒ½åŠ›ã€‚é€šè¿‡å¯¹ç‰¹å¾å›¾çš„æœ‰æ•ˆèšåˆï¼ŒYOLOv8èƒ½å¤Ÿæ›´å¥½åœ°æ•´åˆæ¥è‡ªä¸åŒå±‚æ¬¡çš„ä¿¡æ¯ï¼Œä»è€Œæå‡æ£€æµ‹çš„å‡†ç¡®æ€§å’Œç¨³å®šæ€§ã€‚

å¤´éƒ¨ç½‘ç»œæ˜¯YOLOv8çš„ä¸€å¤§äº®ç‚¹ï¼Œå®ƒå°†åˆ†ç±»å’Œæ£€æµ‹è¿‡ç¨‹è¿›è¡Œäº†æœ‰æ•ˆçš„è§£è€¦ã€‚è¿™ä¸€åˆ›æ–°ä½¿å¾—æ¨¡å‹åœ¨å¤„ç†å¤æ‚åœºæ™¯æ—¶ï¼Œèƒ½å¤Ÿæ›´ä¸“æ³¨äºå„è‡ªçš„ä»»åŠ¡ï¼Œå‡å°‘äº†å®šä½ä¸å‡†å’Œåˆ†ç±»é”™è¯¯çš„æ¦‚ç‡ã€‚YOLOv8çš„å¤´éƒ¨ç½‘ç»œä¸»è¦åŒ…æ‹¬æŸå¤±è®¡ç®—å’Œç›®æ ‡æ£€æµ‹æ¡†ç­›é€‰ä¸¤ä¸ªéƒ¨åˆ†ã€‚åœ¨æŸå¤±è®¡ç®—è¿‡ç¨‹ä¸­ï¼ŒYOLOv8é‡‡ç”¨äº†Task-Aligned Assignerç­–ç•¥ï¼Œæ ¹æ®åˆ†ç±»ä¸å›å½’çš„åˆ†æ•°åŠ æƒç»“æœé€‰æ‹©æ­£æ ·æœ¬ï¼Œä»è€Œä¼˜åŒ–äº†æ­£è´Ÿæ ·æœ¬çš„åˆ†é…ã€‚æŸå¤±è®¡ç®—æ¶µç›–äº†åˆ†ç±»å’Œå›å½’ä¸¤ä¸ªåˆ†æ”¯ï¼Œå…¶ä¸­åˆ†ç±»åˆ†æ”¯ä½¿ç”¨äº†äºŒå…ƒäº¤å‰ç†µæŸå¤±ï¼ˆBCELossï¼‰ï¼Œè€Œå›å½’åˆ†æ”¯åˆ™ç»“åˆäº†åˆ†å¸ƒç„¦ç‚¹æŸå¤±ï¼ˆDFLossï¼‰å’Œå®Œå…¨äº¤å¹¶æ¯”æŸå¤±å‡½æ•°ï¼ˆCIOULossï¼‰ï¼Œè¿›ä¸€æ­¥æå‡äº†æ¨¡å‹å¯¹è¾¹ç•Œæ¡†é¢„æµ‹çš„ç²¾å‡†æ€§ã€‚

YOLOv8åœ¨ç›®æ ‡æ£€æµ‹æ–¹æ³•ä¸Šä¹Ÿè¿›è¡Œäº†é‡å¤§åˆ›æ–°ï¼Œé‡‡ç”¨äº†Anchor-Freeçš„æ£€æµ‹ç­–ç•¥ã€‚è¿™ä¸€æ–¹æ³•é€šè¿‡ç›´æ¥é¢„æµ‹ç›®æ ‡çš„ä½ç½®å’Œå¤§å°ï¼Œçœå»äº†ä¼ ç»Ÿæ–¹æ³•ä¸­å¯¹é”šæ¡†çš„ä¾èµ–ï¼Œç®€åŒ–äº†æ¨¡å‹çš„è®¾è®¡ã€‚ä¸ä¼ ç»Ÿçš„Anchor-Basedæ–¹æ³•ç›¸æ¯”ï¼ŒAnchor-Freeæ–¹æ³•èƒ½å¤Ÿæ›´å¿«é€Ÿåœ°èšç„¦äºç›®æ ‡ä½ç½®çš„é‚»è¿‘ç‚¹ï¼Œä½¿å¾—é¢„æµ‹æ¡†æ›´æ¥è¿‘äºå®é™…è¾¹ç•Œæ¡†åŒºåŸŸã€‚è¿™ä¸€è½¬å˜ä¸ä»…æå‡äº†æ£€æµ‹é€Ÿåº¦ï¼Œä¹Ÿå‡å°‘äº†é”šæ¡†é¢„æµ‹çš„æ•°é‡ï¼Œä»è€ŒåŠ é€Ÿäº†éæœ€å¤§æŠ‘åˆ¶ï¼ˆNMSï¼‰è¿‡ç¨‹ï¼Œè¿›ä¸€æ­¥æé«˜äº†å®æ—¶æ£€æµ‹çš„æ•ˆç‡ã€‚

å€¼å¾—ä¸€æçš„æ˜¯ï¼ŒYOLOv8åœ¨æ¨¡å‹çš„è½»é‡åŒ–æ–¹é¢ä¹Ÿå–å¾—äº†æ˜¾è‘—è¿›å±•ã€‚ç›¸è¾ƒäºä¹‹å‰çš„YOLOç³»åˆ—ï¼ŒYOLOv8çš„æƒé‡æ–‡ä»¶å¾—åˆ°äº†è¿›ä¸€æ­¥çš„å‹ç¼©ï¼Œä½¿å…¶èƒ½å¤Ÿåœ¨å„ç§åµŒå…¥å¼è®¾å¤‡ä¸Šé«˜æ•ˆè¿è¡Œã€‚è¿™ä¸€ç‰¹æ€§ä½¿å¾—YOLOv8åœ¨å®é™…åº”ç”¨ä¸­ï¼Œèƒ½å¤Ÿæ»¡è¶³å¯¹å®æ—¶æ€§å’Œç²¾åº¦çš„åŒé‡éœ€æ±‚ï¼Œå¹¿æ³›é€‚ç”¨äºæ™ºèƒ½ç›‘æ§ã€è‡ªåŠ¨é©¾é©¶ã€æ— äººæœºå·¡æ£€ç­‰å¤šä¸ªé¢†åŸŸã€‚

ç»¼ä¸Šæ‰€è¿°ï¼ŒYOLOv8é€šè¿‡å¯¹ç½‘ç»œç»“æ„çš„æ·±åº¦ä¼˜åŒ–ã€åˆ›æ–°çš„æ£€æµ‹æ–¹æ³•ä»¥åŠè½»é‡åŒ–è®¾è®¡ï¼Œå±•ç°å‡ºäº†å“è¶Šçš„æ€§èƒ½ã€‚å®ƒä¸ä»…ç»§æ‰¿äº†YOLOç³»åˆ—çš„ä¼˜è‰¯ä¼ ç»Ÿï¼Œè¿˜åœ¨æ­¤åŸºç¡€ä¸Šè¿›è¡Œäº†å…¨é¢çš„æ”¹è¿›ï¼Œæˆä¸ºå½“å‰ç›®æ ‡æ£€æµ‹é¢†åŸŸçš„ä½¼ä½¼è€…ã€‚éšç€YOLOv8çš„æ¨å¹¿ä¸åº”ç”¨ï¼Œæœªæ¥çš„ç›®æ ‡æ£€æµ‹æŠ€æœ¯å°†æ›´åŠ é«˜æ•ˆã€ç²¾å‡†ï¼Œä¸ºå„è¡Œå„ä¸šçš„æ™ºèƒ½åŒ–å‘å±•æä¾›å¼ºæœ‰åŠ›çš„æ”¯æŒã€‚

![18.png](18.png)

### 11.é¡¹ç›®æ ¸å¿ƒæºç è®²è§£ï¼ˆå†ä¹Ÿä¸ç”¨æ‹…å¿ƒçœ‹ä¸æ‡‚ä»£ç é€»è¾‘ï¼‰

#### 11.1 70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\models\fastsam\predict.py

ä»¥ä¸‹æ˜¯ç»è¿‡ç²¾ç®€å’Œæ³¨é‡Šçš„æ ¸å¿ƒä»£ç éƒ¨åˆ†ï¼š

```python
# å¯¼å…¥å¿…è¦çš„åº“
import torch
from ultralytics.engine.results import Results
from ultralytics.models.fastsam.utils import bbox_iou
from ultralytics.models.yolo.detect.predict import DetectionPredictor
from ultralytics.utils import ops

class FastSAMPredictor(DetectionPredictor):
    """
    FastSAMPredictorç±»ä¸“é—¨ç”¨äºåœ¨Ultralytics YOLOæ¡†æ¶ä¸­è¿›è¡Œå¿«é€ŸSAMï¼ˆSegment Anything Modelï¼‰åˆ†å‰²é¢„æµ‹ä»»åŠ¡ã€‚
    è¯¥ç±»ç»§æ‰¿è‡ªDetectionPredictorï¼Œå®šåˆ¶äº†é¢„æµ‹ç®¡é“ä»¥é€‚åº”å¿«é€ŸSAMï¼Œè°ƒæ•´åå¤„ç†æ­¥éª¤ä»¥ç»“åˆæ©ç é¢„æµ‹å’Œéæœ€å¤§æŠ‘åˆ¶ã€‚
    """

    def __init__(self, cfg=DEFAULT_CFG, overrides=None, _callbacks=None):
        """
        åˆå§‹åŒ–FastSAMPredictorç±»ï¼Œè®¾ç½®ä»»åŠ¡ä¸º'åˆ†å‰²'ã€‚
        
        Args:
            cfg (dict): é¢„æµ‹çš„é…ç½®å‚æ•°ã€‚
            overrides (dict, optional): å¯é€‰çš„å‚æ•°è¦†ç›–ï¼Œç”¨äºè‡ªå®šä¹‰è¡Œä¸ºã€‚
            _callbacks (dict, optional): åœ¨é¢„æµ‹è¿‡ç¨‹ä¸­è°ƒç”¨çš„å¯é€‰å›è°ƒå‡½æ•°åˆ—è¡¨ã€‚
        """
        super().__init__(cfg, overrides, _callbacks)
        self.args.task = 'segment'  # è®¾ç½®ä»»åŠ¡ä¸ºåˆ†å‰²

    def postprocess(self, preds, img, orig_imgs):
        """
        å¯¹é¢„æµ‹ç»“æœè¿›è¡Œåå¤„ç†ï¼ŒåŒ…æ‹¬éæœ€å¤§æŠ‘åˆ¶å’Œå°†æ¡†ç¼©æ”¾åˆ°åŸå§‹å›¾åƒå¤§å°ï¼Œå¹¶è¿”å›æœ€ç»ˆç»“æœã€‚
        
        Args:
            preds (list): æ¨¡å‹çš„åŸå§‹è¾“å‡ºé¢„æµ‹ã€‚
            img (torch.Tensor): å¤„ç†åçš„å›¾åƒå¼ é‡ã€‚
            orig_imgs (list | torch.Tensor): åŸå§‹å›¾åƒæˆ–å›¾åƒåˆ—è¡¨ã€‚
        
        Returns:
            (list): åŒ…å«å¤„ç†åçš„æ¡†ã€æ©ç å’Œå…¶ä»–å…ƒæ•°æ®çš„Resultså¯¹è±¡åˆ—è¡¨ã€‚
        """
        # åº”ç”¨éæœ€å¤§æŠ‘åˆ¶ï¼Œè¿‡æ»¤æ‰ä½ç½®ä¿¡åº¦çš„é¢„æµ‹
        p = ops.non_max_suppression(
            preds[0],
            self.args.conf,
            self.args.iou,
            agnostic=self.args.agnostic_nms,
            max_det=self.args.max_det,
            nc=1,  # SAMæ²¡æœ‰ç±»åˆ«é¢„æµ‹ï¼Œå› æ­¤è®¾ç½®ä¸º1ç±»
            classes=self.args.classes)

        # åˆ›å»ºä¸€ä¸ªå…¨æ¡†ï¼Œç”¨äºåç»­çš„IOUè®¡ç®—
        full_box = torch.zeros(p[0].shape[1], device=p[0].device)
        full_box[2], full_box[3], full_box[4], full_box[6:] = img.shape[3], img.shape[2], 1.0, 1.0
        full_box = full_box.view(1, -1)

        # è®¡ç®—IOUå¹¶æ›´æ–°full_box
        critical_iou_index = bbox_iou(full_box[0][:4], p[0][:, :4], iou_thres=0.9, image_shape=img.shape[2:])
        if critical_iou_index.numel() != 0:
            full_box[0][4] = p[0][critical_iou_index][:, 4]
            full_box[0][6:] = p[0][critical_iou_index][:, 6:]
            p[0][critical_iou_index] = full_box

        # å¦‚æœè¾“å…¥å›¾åƒæ˜¯å¼ é‡è€Œä¸æ˜¯åˆ—è¡¨ï¼Œåˆ™è½¬æ¢ä¸ºnumpyæ ¼å¼
        if not isinstance(orig_imgs, list):
            orig_imgs = ops.convert_torch2numpy_batch(orig_imgs)

        results = []  # å­˜å‚¨æœ€ç»ˆç»“æœ
        proto = preds[1][-1] if len(preds[1]) == 3 else preds[1]  # è·å–æ©ç åŸå‹

        # éå†æ¯ä¸ªé¢„æµ‹ï¼Œå¤„ç†å¹¶ç”Ÿæˆç»“æœ
        for i, pred in enumerate(p):
            orig_img = orig_imgs[i]  # è·å–åŸå§‹å›¾åƒ
            img_path = self.batch[0][i]  # è·å–å›¾åƒè·¯å¾„
            
            if not len(pred):  # å¦‚æœæ²¡æœ‰é¢„æµ‹æ¡†
                masks = None
            elif self.args.retina_masks:  # ä½¿ç”¨Retinaæ©ç å¤„ç†
                pred[:, :4] = ops.scale_boxes(img.shape[2:], pred[:, :4], orig_img.shape)  # ç¼©æ”¾æ¡†
                masks = ops.process_mask_native(proto[i], pred[:, 6:], pred[:, :4], orig_img.shape[:2])  # å¤„ç†æ©ç 
            else:  # å¸¸è§„æ©ç å¤„ç†
                masks = ops.process_mask(proto[i], pred[:, 6:], pred[:, :4], img.shape[2:], upsample=True)  # å¤„ç†æ©ç 
                pred[:, :4] = ops.scale_boxes(img.shape[2:], pred[:, :4], orig_img.shape)  # ç¼©æ”¾æ¡†
            
            # å°†ç»“æœå­˜å‚¨åˆ°Resultså¯¹è±¡ä¸­
            results.append(Results(orig_img, path=img_path, names=self.model.names, boxes=pred[:, :6], masks=masks))
        
        return results  # è¿”å›æœ€ç»ˆç»“æœåˆ—è¡¨
```

### ä»£ç åˆ†æï¼š
1. **ç±»å®šä¹‰**ï¼š`FastSAMPredictor`ç±»ç»§æ‰¿è‡ª`DetectionPredictor`ï¼Œä¸“é—¨ç”¨äºå¿«é€ŸSAMåˆ†å‰²ä»»åŠ¡ã€‚
2. **åˆå§‹åŒ–æ–¹æ³•**ï¼šåœ¨åˆå§‹åŒ–æ—¶è®¾ç½®ä»»åŠ¡ä¸ºåˆ†å‰²ï¼Œå¹¶è°ƒç”¨çˆ¶ç±»çš„åˆå§‹åŒ–æ–¹æ³•ã€‚
3. **åå¤„ç†æ–¹æ³•**ï¼š`postprocess`æ–¹æ³•å¯¹æ¨¡å‹çš„é¢„æµ‹ç»“æœè¿›è¡Œåå¤„ç†ï¼ŒåŒ…æ‹¬ï¼š
   - åº”ç”¨éæœ€å¤§æŠ‘åˆ¶ä»¥å»é™¤ä½ç½®ä¿¡åº¦çš„æ¡†ã€‚
   - è®¡ç®—IOUä»¥æ›´æ–°æ¡†çš„å±æ€§ã€‚
   - å¤„ç†æ©ç å¹¶å°†ç»“æœå­˜å‚¨åœ¨`Results`å¯¹è±¡ä¸­ï¼Œæœ€ç»ˆè¿”å›å¤„ç†åçš„ç»“æœåˆ—è¡¨ã€‚

ä»¥ä¸Šæ˜¯å¯¹ä»£ç çš„æ ¸å¿ƒéƒ¨åˆ†è¿›è¡Œäº†æç‚¼å’Œè¯¦ç»†æ³¨é‡Šï¼Œå¸®åŠ©ç†è§£å…¶åŠŸèƒ½å’Œé€»è¾‘ã€‚

è¯¥æ–‡ä»¶å®šä¹‰äº†ä¸€ä¸ªåä¸º `FastSAMPredictor` çš„ç±»ï¼Œä¸“é—¨ç”¨äºåœ¨ Ultralytics YOLO æ¡†æ¶ä¸­æ‰§è¡Œå¿«é€Ÿçš„ SAMï¼ˆSegment Anything Modelï¼‰åˆ†å‰²é¢„æµ‹ä»»åŠ¡ã€‚è¿™ä¸ªç±»ç»§æ‰¿è‡ª `DetectionPredictor`ï¼Œå¹¶é’ˆå¯¹å¿«é€Ÿ SAM è¿›è¡Œäº†å®šåˆ¶åŒ–çš„é¢„æµ‹æµç¨‹ã€‚

åœ¨åˆå§‹åŒ–æ–¹æ³• `__init__` ä¸­ï¼Œ`FastSAMPredictor` ç±»è°ƒç”¨äº†çˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼Œå¹¶å°†ä»»åŠ¡ç±»å‹è®¾ç½®ä¸ºâ€œåˆ†å‰²â€ã€‚å®ƒæ¥å—ä¸‰ä¸ªå‚æ•°ï¼šé…ç½®å‚æ•° `cfg`ï¼Œå¯é€‰çš„å‚æ•°è¦†ç›– `overrides`ï¼Œä»¥åŠå¯é€‰çš„å›è°ƒå‡½æ•° `_callbacks`ï¼Œè¿™äº›å‚æ•°ç”¨äºè‡ªå®šä¹‰é¢„æµ‹è¡Œä¸ºã€‚

`postprocess` æ–¹æ³•æ˜¯è¯¥ç±»çš„æ ¸å¿ƒåŠŸèƒ½ä¹‹ä¸€ï¼Œè´Ÿè´£å¯¹æ¨¡å‹çš„åŸå§‹è¾“å‡ºè¿›è¡Œåå¤„ç†ï¼ŒåŒ…æ‹¬éæå¤§å€¼æŠ‘åˆ¶ï¼ˆNMSï¼‰å’Œå°†è¾¹ç•Œæ¡†ç¼©æ”¾åˆ°åŸå§‹å›¾åƒå¤§å°ã€‚è¯¥æ–¹æ³•æ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼š`preds`ï¼ˆæ¨¡å‹çš„åŸå§‹è¾“å‡ºï¼‰ï¼Œ`img`ï¼ˆå¤„ç†åçš„å›¾åƒå¼ é‡ï¼‰ï¼Œä»¥åŠ `orig_imgs`ï¼ˆåŸå§‹å›¾åƒæˆ–å›¾åƒåˆ—è¡¨ï¼‰ã€‚åœ¨æ–¹æ³•å†…éƒ¨ï¼Œé¦–å…ˆä½¿ç”¨éæå¤§å€¼æŠ‘åˆ¶å¯¹é¢„æµ‹ç»“æœè¿›è¡Œå¤„ç†ï¼Œç­›é€‰å‡ºç½®ä¿¡åº¦é«˜çš„æ£€æµ‹æ¡†ã€‚æ¥ç€ï¼Œåˆ›å»ºä¸€ä¸ªå…¨æ¡†ï¼ˆ`full_box`ï¼‰ï¼Œå¹¶æ ¹æ®è¾“å…¥å›¾åƒçš„å°ºå¯¸è¿›è¡Œåˆå§‹åŒ–ã€‚

æ¥ä¸‹æ¥ï¼Œä½¿ç”¨ `bbox_iou` å‡½æ•°è®¡ç®—ä¸å…¨æ¡†çš„ IOUï¼ˆIntersection over Unionï¼‰ï¼Œå¹¶æ ¹æ®é˜ˆå€¼æ›´æ–°å…¨æ¡†çš„å€¼ã€‚éšåï¼Œå¦‚æœè¾“å…¥çš„åŸå§‹å›¾åƒä¸æ˜¯åˆ—è¡¨ï¼Œåˆ™å°†å…¶è½¬æ¢ä¸º NumPy æ ¼å¼ã€‚æœ€åï¼Œæ–¹æ³•ä¼šéå†æ¯ä¸ªé¢„æµ‹ç»“æœï¼Œå¤„ç†æ©è†œå¹¶å°†æœ€ç»ˆç»“æœå­˜å‚¨åœ¨ `results` åˆ—è¡¨ä¸­ã€‚æ¯ä¸ªç»“æœéƒ½åŒ…å«äº†åŸå§‹å›¾åƒã€è·¯å¾„ã€ç±»åˆ«åç§°ã€è¾¹ç•Œæ¡†å’Œæ©è†œä¿¡æ¯ã€‚

æ€»çš„æ¥è¯´ï¼Œè¿™ä¸ªæ–‡ä»¶å®ç°äº†å¿«é€Ÿ SAM åˆ†å‰²é¢„æµ‹çš„åå¤„ç†é€»è¾‘ï¼Œæ—¨åœ¨ä¼˜åŒ–å•ç±»åˆ†å‰²ä»»åŠ¡çš„æ€§èƒ½ï¼Œå¹¶åœ¨ Ultralytics YOLO æ¡†æ¶ä¸­æä¾›é«˜æ•ˆçš„é¢„æµ‹åŠŸèƒ½ã€‚

#### 11.2 ui.py

ä»¥ä¸‹æ˜¯ä»£ç ä¸­æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ï¼Œå¹¶é™„ä¸Šè¯¦ç»†çš„ä¸­æ–‡æ³¨é‡Šï¼š

```python
import sys
import subprocess

def run_script(script_path):
    """
    ä½¿ç”¨å½“å‰ Python ç¯å¢ƒè¿è¡ŒæŒ‡å®šçš„è„šæœ¬ã€‚

    Args:
        script_path (str): è¦è¿è¡Œçš„è„šæœ¬è·¯å¾„

    Returns:
        None
    """
    # è·å–å½“å‰ Python è§£é‡Šå™¨çš„è·¯å¾„
    python_path = sys.executable

    # æ„å»ºè¿è¡Œå‘½ä»¤ï¼Œä½¿ç”¨ streamlit è¿è¡ŒæŒ‡å®šçš„è„šæœ¬
    command = f'"{python_path}" -m streamlit run "{script_path}"'

    # æ‰§è¡Œå‘½ä»¤
    result = subprocess.run(command, shell=True)
    # æ£€æŸ¥å‘½ä»¤æ‰§è¡Œçš„è¿”å›ç ï¼Œå¦‚æœä¸ä¸º0åˆ™è¡¨ç¤ºå‡ºé”™
    if result.returncode != 0:
        print("è„šæœ¬è¿è¡Œå‡ºé”™ã€‚")

# å®ä¾‹åŒ–å¹¶è¿è¡Œåº”ç”¨
if __name__ == "__main__":
    # æŒ‡å®šè¦è¿è¡Œçš„è„šæœ¬è·¯å¾„
    script_path = "web.py"  # è¿™é‡Œå¯ä»¥ç›´æ¥æŒ‡å®šè„šæœ¬å

    # è°ƒç”¨å‡½æ•°è¿è¡Œè„šæœ¬
    run_script(script_path)
```

### ä»£ç æ³¨é‡Šè¯´æ˜ï¼š
1. **å¯¼å…¥æ¨¡å—**ï¼š
   - `sys`ï¼šç”¨äºè®¿é—®ä¸ Python è§£é‡Šå™¨ç›¸å…³çš„å˜é‡å’Œå‡½æ•°ã€‚
   - `subprocess`ï¼šç”¨äºæ‰§è¡Œå¤–éƒ¨å‘½ä»¤å’Œä¸å…¶äº¤äº’ã€‚

2. **å®šä¹‰ `run_script` å‡½æ•°**ï¼š
   - è¯¥å‡½æ•°æ¥å—ä¸€ä¸ªå‚æ•° `script_path`ï¼Œè¡¨ç¤ºè¦è¿è¡Œçš„ Python è„šæœ¬çš„è·¯å¾„ã€‚
   - ä½¿ç”¨ `sys.executable` è·å–å½“å‰ Python è§£é‡Šå™¨çš„è·¯å¾„ï¼Œä»¥ç¡®ä¿åœ¨æ­£ç¡®çš„ç¯å¢ƒä¸­è¿è¡Œè„šæœ¬ã€‚
   - æ„å»ºä¸€ä¸ªå‘½ä»¤å­—ç¬¦ä¸²ï¼Œä½¿ç”¨ `streamlit` æ¨¡å—è¿è¡ŒæŒ‡å®šçš„è„šæœ¬ã€‚
   - ä½¿ç”¨ `subprocess.run` æ‰§è¡Œæ„å»ºçš„å‘½ä»¤ï¼Œå¹¶æ£€æŸ¥è¿”å›ç ä»¥åˆ¤æ–­è„šæœ¬æ˜¯å¦æˆåŠŸè¿è¡Œã€‚

3. **ä¸»ç¨‹åºå…¥å£**ï¼š
   - ä½¿ç”¨ `if __name__ == "__main__":` ç¡®ä¿è¯¥ä»£ç å—ä»…åœ¨ç›´æ¥è¿è¡Œè„šæœ¬æ—¶æ‰§è¡Œã€‚
   - æŒ‡å®šè¦è¿è¡Œçš„è„šæœ¬è·¯å¾„ï¼ˆè¿™é‡Œä¸º `web.py`ï¼‰ã€‚
   - è°ƒç”¨ `run_script` å‡½æ•°æ¥æ‰§è¡ŒæŒ‡å®šçš„è„šæœ¬ã€‚

è¿™ä¸ªç¨‹åºæ–‡ä»¶åä¸º `ui.py`ï¼Œå…¶ä¸»è¦åŠŸèƒ½æ˜¯é€šè¿‡å½“å‰çš„ Python ç¯å¢ƒè¿è¡Œä¸€ä¸ªæŒ‡å®šçš„è„šæœ¬ï¼Œå…·ä½“æ˜¯ä¸€ä¸ªåä¸º `web.py` çš„æ–‡ä»¶ã€‚ç¨‹åºé¦–å…ˆå¯¼å…¥äº†å¿…è¦çš„æ¨¡å—ï¼ŒåŒ…æ‹¬ `sys`ã€`os` å’Œ `subprocess`ï¼Œä»¥åŠä¸€ä¸ªè‡ªå®šä¹‰çš„ `abs_path` å‡½æ•°ï¼Œç”¨äºè·å–è„šæœ¬çš„ç»å¯¹è·¯å¾„ã€‚

åœ¨ `run_script` å‡½æ•°ä¸­ï¼Œé¦–å…ˆè·å–å½“å‰ Python è§£é‡Šå™¨çš„è·¯å¾„ï¼Œè¿™é€šè¿‡ `sys.executable` å®ç°ã€‚æ¥ç€ï¼Œæ„å»ºä¸€ä¸ªå‘½ä»¤å­—ç¬¦ä¸²ï¼Œè¯¥å‘½ä»¤ç”¨äºè¿è¡Œ `streamlit`ï¼Œè¿™æ˜¯ä¸€ä¸ªç”¨äºæ„å»ºå’Œåˆ†äº«æ•°æ®åº”ç”¨çš„æ¡†æ¶ã€‚å‘½ä»¤çš„æ ¼å¼ä¸º `"{python_path}" -m streamlit run "{script_path}"`ï¼Œå…¶ä¸­ `python_path` æ˜¯å½“å‰ Python è§£é‡Šå™¨çš„è·¯å¾„ï¼Œ`script_path` æ˜¯è¦è¿è¡Œçš„è„šæœ¬è·¯å¾„ã€‚

ç„¶åï¼Œä½¿ç”¨ `subprocess.run` æ–¹æ³•æ‰§è¡Œæ„å»ºå¥½çš„å‘½ä»¤ã€‚è¿™ä¸ªæ–¹æ³•ä¼šåœ¨æ–°çš„ shell ä¸­è¿è¡Œå‘½ä»¤ï¼Œå¹¶ç­‰å¾…å…¶å®Œæˆã€‚å¦‚æœå‘½ä»¤æ‰§è¡Œçš„è¿”å›ç ä¸ä¸ºé›¶ï¼Œè¡¨ç¤ºè„šæœ¬è¿è¡Œè¿‡ç¨‹ä¸­å‡ºç°äº†é”™è¯¯ï¼Œç¨‹åºä¼šæ‰“å°å‡ºâ€œè„šæœ¬è¿è¡Œå‡ºé”™ã€‚â€çš„æç¤ºä¿¡æ¯ã€‚

åœ¨æ–‡ä»¶çš„æœ€åéƒ¨åˆ†ï¼Œä½¿ç”¨ `if __name__ == "__main__":` æ¥åˆ¤æ–­å½“å‰æ¨¡å—æ˜¯å¦æ˜¯ä¸»ç¨‹åºã€‚å¦‚æœæ˜¯ï¼Œåˆ™æŒ‡å®šè¦è¿è¡Œçš„è„šæœ¬è·¯å¾„ä¸º `web.py` çš„ç»å¯¹è·¯å¾„ï¼Œå¹¶è°ƒç”¨ `run_script` å‡½æ•°æ¥æ‰§è¡Œè¯¥è„šæœ¬ã€‚è¿™æ ·è®¾è®¡ä½¿å¾—è¯¥æ–‡ä»¶å¯ä»¥ä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„è„šæœ¬è¿è¡Œï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥è¢«å…¶ä»–æ¨¡å—å¯¼å…¥è€Œä¸æ‰§è¡Œä¸»ç¨‹åºéƒ¨åˆ†ã€‚

#### 11.3 code\ultralytics\models\sam\__init__.py

ä»¥ä¸‹æ˜¯ä»£ç ä¸­æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ï¼Œå¹¶é™„ä¸Šè¯¦ç»†çš„ä¸­æ–‡æ³¨é‡Šï¼š

```python
# å¯¼å…¥æ‰€éœ€çš„æ¨¡å—
from .model import SAM  # ä»å½“å‰åŒ…çš„modelæ¨¡å—ä¸­å¯¼å…¥SAMç±»
from .predict import Predictor  # ä»å½“å‰åŒ…çš„predictæ¨¡å—ä¸­å¯¼å…¥Predictorç±»

# å®šä¹‰å½“å‰æ¨¡å—çš„å…¬å¼€æ¥å£
__all__ = "SAM", "Predictor"  # è¿™æ˜¯ä¸€ä¸ªå…ƒç»„ï¼ŒæŒ‡å®šäº†åœ¨ä½¿ç”¨from module import *æ—¶å¯ä»¥å¯¼å…¥çš„ç±»
```

### æ³¨é‡Šè¯´æ˜ï¼š
1. `from .model import SAM`ï¼šè¿™è¡Œä»£ç ä»å½“å‰åŒ…çš„`model`æ¨¡å—ä¸­å¯¼å…¥äº†`SAM`ç±»ã€‚`SAM`å¯èƒ½æ˜¯ä¸€ä¸ªç”¨äºæ¨¡å‹å®šä¹‰æˆ–è®­ç»ƒçš„ç±»ã€‚
  
2. `from .predict import Predictor`ï¼šè¿™è¡Œä»£ç ä»å½“å‰åŒ…çš„`predict`æ¨¡å—ä¸­å¯¼å…¥äº†`Predictor`ç±»ã€‚`Predictor`å¯èƒ½æ˜¯ä¸€ä¸ªç”¨äºè¿›è¡Œé¢„æµ‹æˆ–æ¨æ–­çš„ç±»ã€‚

3. `__all__ = "SAM", "Predictor"`ï¼šè¿™ä¸ªç‰¹æ®Šå˜é‡`__all__`å®šä¹‰äº†å½“ä½¿ç”¨`from module import *`è¯­å¥æ—¶ï¼Œå“ªäº›åç§°æ˜¯å¯ä»¥è¢«å¯¼å…¥çš„ã€‚åœ¨è¿™é‡Œï¼Œåªæœ‰`SAM`å’Œ`Predictor`ä¼šè¢«å¯¼å…¥ï¼Œå…¶ä»–æœªåˆ—å‡ºçš„åç§°å°†ä¸ä¼šè¢«å¯¼å…¥ã€‚è¿™æ˜¯ä¸€ç§æ§åˆ¶æ¨¡å—æ¥å£çš„æ–¹å¼ã€‚

è¿™ä¸ªç¨‹åºæ–‡ä»¶æ˜¯ä¸€ä¸ªPythonæ¨¡å—çš„åˆå§‹åŒ–æ–‡ä»¶ï¼Œæ–‡ä»¶åä¸º`__init__.py`ï¼Œå®ƒä½äº`code/ultralytics/models/sam/`ç›®å½•ä¸‹ã€‚è¯¥æ–‡ä»¶çš„ä¸»è¦ä½œç”¨æ˜¯å®šä¹‰æ¨¡å—çš„å…¬å…±æ¥å£ï¼Œå¹¶å¯¼å…¥å…¶ä»–ç›¸å…³çš„ç±»æˆ–å‡½æ•°ã€‚

é¦–å…ˆï¼Œæ–‡ä»¶å¼€å¤´çš„æ³¨é‡Š`# Ultralytics YOLO ğŸš€, AGPL-3.0 license`è¡¨æ˜è¿™ä¸ªæ¨¡å—å±äºUltralytics YOLOé¡¹ç›®ï¼Œå¹¶ä¸”ä½¿ç”¨AGPL-3.0è®¸å¯è¯ã€‚è¿™æ„å‘³ç€è¯¥ä»£ç æ˜¯å¼€æºçš„ï¼Œç”¨æˆ·å¯ä»¥è‡ªç”±ä½¿ç”¨å’Œä¿®æ”¹ï¼Œä½†éœ€è¦éµå¾ªç›¸åº”çš„è®¸å¯è¯æ¡æ¬¾ã€‚

æ¥ä¸‹æ¥ï¼Œæ–‡ä»¶é€šè¿‡`from .model import SAM`å’Œ`from .predict import Predictor`è¿™ä¸¤è¡Œä»£ç ä»åŒä¸€ç›®å½•ä¸‹çš„`model.py`å’Œ`predict.py`æ–‡ä»¶ä¸­å¯¼å…¥äº†`SAM`ç±»å’Œ`Predictor`ç±»ã€‚è¿™è¡¨æ˜è¯¥æ¨¡å—ä¾èµ–äºè¿™ä¸¤ä¸ªç±»çš„å®ç°ï¼Œå¯èƒ½æ˜¯ä¸ºäº†è¿›è¡Œæ¨¡å‹çš„å®šä¹‰å’Œé¢„æµ‹åŠŸèƒ½çš„å®ç°ã€‚

æœ€åï¼Œ`__all__ = "SAM", "Predictor"`è¿™ä¸€è¡Œå®šä¹‰äº†æ¨¡å—çš„å…¬å…±æ¥å£ã€‚`__all__`æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å˜é‡ï¼Œå½“ä½¿ç”¨`from module import *`è¯­å¥æ—¶ï¼Œåªæœ‰åœ¨`__all__`ä¸­åˆ—å‡ºçš„åç§°ä¼šè¢«å¯¼å…¥ã€‚è¿™æ„å‘³ç€ï¼Œç”¨æˆ·åœ¨å¯¼å…¥è¿™ä¸ªæ¨¡å—æ—¶ï¼Œå¦‚æœä½¿ç”¨äº†é€šé…ç¬¦å¯¼å…¥ï¼Œåªæœ‰`SAM`å’Œ`Predictor`è¿™ä¸¤ä¸ªåç§°ä¼šè¢«å¼•å…¥ï¼Œä»è€Œé¿å…äº†ä¸å¿…è¦çš„åç§°å†²çªå’Œéšè—å®ç°ç»†èŠ‚ã€‚

æ€»ä½“æ¥è¯´ï¼Œè¿™ä¸ª`__init__.py`æ–‡ä»¶çš„ä½œç”¨æ˜¯å°†`SAM`å’Œ`Predictor`ç±»æš´éœ²ç»™æ¨¡å—çš„ä½¿ç”¨è€…ï¼Œä½¿å¾—ä»–ä»¬å¯ä»¥æ–¹ä¾¿åœ°ä½¿ç”¨è¿™äº›åŠŸèƒ½ï¼ŒåŒæ—¶ä¿æŒæ¨¡å—çš„ç»“æ„æ¸…æ™°å’Œç®€æ´ã€‚

#### 11.4 70+ç§YOLOv8ç®—æ³•æ”¹è¿›æºç å¤§å…¨å’Œè°ƒè¯•åŠ è½½è®­ç»ƒæ•™ç¨‹ï¼ˆéå¿…è¦ï¼‰\ultralytics\models\sam\model.py

ä»¥ä¸‹æ˜¯ä»£ç ä¸­æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ï¼Œå¹¶é™„ä¸Šè¯¦ç»†çš„ä¸­æ–‡æ³¨é‡Šï¼š

```python
from pathlib import Path
from ultralytics.engine.model import Model
from .build import build_sam
from .predict import Predictor

class SAM(Model):
    """
    SAM (Segment Anything Model) æ¥å£ç±»ã€‚

    SAM æ—¨åœ¨å®ç°å¯æç¤ºçš„å®æ—¶å›¾åƒåˆ†å‰²ã€‚å¯ä»¥ä½¿ç”¨å¤šç§æç¤ºæ–¹å¼ï¼Œå¦‚è¾¹ç•Œæ¡†ã€ç‚¹æˆ–æ ‡ç­¾ã€‚è¯¥æ¨¡å‹å…·å¤‡é›¶-shot æ€§èƒ½ï¼Œå¹¶åœ¨ SA-1B æ•°æ®é›†ä¸Šè¿›è¡Œè®­ç»ƒã€‚
    """

    def __init__(self, model='sam_b.pt') -> None:
        """
        ä½¿ç”¨é¢„è®­ç»ƒæ¨¡å‹æ–‡ä»¶åˆå§‹åŒ– SAM æ¨¡å‹ã€‚

        å‚æ•°:
            model (str): é¢„è®­ç»ƒ SAM æ¨¡å‹æ–‡ä»¶çš„è·¯å¾„ã€‚æ–‡ä»¶åº”å…·æœ‰ .pt æˆ– .pth æ‰©å±•åã€‚

        å¼‚å¸¸:
            NotImplementedError: å¦‚æœæ¨¡å‹æ–‡ä»¶æ‰©å±•åä¸æ˜¯ .pt æˆ– .pthã€‚
        """
        # æ£€æŸ¥æ¨¡å‹æ–‡ä»¶çš„æ‰©å±•åæ˜¯å¦ä¸º .pt æˆ– .pth
        if model and Path(model).suffix not in ('.pt', '.pth'):
            raise NotImplementedError('SAM é¢„æµ‹éœ€è¦é¢„è®­ç»ƒçš„ *.pt æˆ– *.pth æ¨¡å‹ã€‚')
        # è°ƒç”¨çˆ¶ç±»çš„åˆå§‹åŒ–æ–¹æ³•
        super().__init__(model=model, task='segment')

    def predict(self, source, stream=False, bboxes=None, points=None, labels=None, **kwargs):
        """
        å¯¹ç»™å®šçš„å›¾åƒæˆ–è§†é¢‘æºæ‰§è¡Œåˆ†å‰²é¢„æµ‹ã€‚

        å‚æ•°:
            source (str): å›¾åƒæˆ–è§†é¢‘æ–‡ä»¶çš„è·¯å¾„ï¼Œæˆ– PIL.Image å¯¹è±¡ï¼Œæˆ– numpy.ndarray å¯¹è±¡ã€‚
            stream (bool, optional): å¦‚æœä¸º Trueï¼Œåˆ™å¯ç”¨å®æ—¶æµã€‚é»˜è®¤ä¸º Falseã€‚
            bboxes (list, optional): æç¤ºåˆ†å‰²çš„è¾¹ç•Œæ¡†åæ ‡åˆ—è¡¨ã€‚é»˜è®¤ä¸º Noneã€‚
            points (list, optional): æç¤ºåˆ†å‰²çš„ç‚¹åˆ—è¡¨ã€‚é»˜è®¤ä¸º Noneã€‚
            labels (list, optional): æç¤ºåˆ†å‰²çš„æ ‡ç­¾åˆ—è¡¨ã€‚é»˜è®¤ä¸º Noneã€‚

        è¿”å›:
            (list): æ¨¡å‹çš„é¢„æµ‹ç»“æœã€‚
        """
        # è®¾ç½®é¢„æµ‹çš„è¦†ç›–å‚æ•°
        overrides = dict(conf=0.25, task='segment', mode='predict', imgsz=1024)
        kwargs.update(overrides)  # æ›´æ–°é¢å¤–å‚æ•°
        prompts = dict(bboxes=bboxes, points=points, labels=labels)  # åˆ›å»ºæç¤ºå­—å…¸
        # è°ƒç”¨çˆ¶ç±»çš„é¢„æµ‹æ–¹æ³•
        return super().predict(source, stream, prompts=prompts, **kwargs)

    def __call__(self, source=None, stream=False, bboxes=None, points=None, labels=None, **kwargs):
        """
        'predict' æ–¹æ³•çš„åˆ«åã€‚

        å‚æ•°:
            source (str): å›¾åƒæˆ–è§†é¢‘æ–‡ä»¶çš„è·¯å¾„ï¼Œæˆ– PIL.Image å¯¹è±¡ï¼Œæˆ– numpy.ndarray å¯¹è±¡ã€‚
            stream (bool, optional): å¦‚æœä¸º Trueï¼Œåˆ™å¯ç”¨å®æ—¶æµã€‚é»˜è®¤ä¸º Falseã€‚
            bboxes (list, optional): æç¤ºåˆ†å‰²çš„è¾¹ç•Œæ¡†åæ ‡åˆ—è¡¨ã€‚é»˜è®¤ä¸º Noneã€‚
            points (list, optional): æç¤ºåˆ†å‰²çš„ç‚¹åˆ—è¡¨ã€‚é»˜è®¤ä¸º Noneã€‚
            labels (list, optional): æç¤ºåˆ†å‰²çš„æ ‡ç­¾åˆ—è¡¨ã€‚é»˜è®¤ä¸º Noneã€‚

        è¿”å›:
            (list): æ¨¡å‹çš„é¢„æµ‹ç»“æœã€‚
        """
        return self.predict(source, stream, bboxes, points, labels, **kwargs)

    def info(self, detailed=False, verbose=True):
        """
        è®°å½•æœ‰å…³ SAM æ¨¡å‹çš„ä¿¡æ¯ã€‚

        å‚æ•°:
            detailed (bool, optional): å¦‚æœä¸º Trueï¼Œåˆ™æ˜¾ç¤ºæœ‰å…³æ¨¡å‹çš„è¯¦ç»†ä¿¡æ¯ã€‚é»˜è®¤ä¸º Falseã€‚
            verbose (bool, optional): å¦‚æœä¸º Trueï¼Œåˆ™åœ¨æ§åˆ¶å°æ˜¾ç¤ºä¿¡æ¯ã€‚é»˜è®¤ä¸º Trueã€‚

        è¿”å›:
            (tuple): åŒ…å«æ¨¡å‹ä¿¡æ¯çš„å…ƒç»„ã€‚
        """
        return model_info(self.model, detailed=detailed, verbose=verbose)

    @property
    def task_map(self):
        """
        æä¾›ä» 'segment' ä»»åŠ¡åˆ°å…¶å¯¹åº” 'Predictor' çš„æ˜ å°„ã€‚

        è¿”å›:
            (dict): å°† 'segment' ä»»åŠ¡æ˜ å°„åˆ°å…¶å¯¹åº” 'Predictor' çš„å­—å…¸ã€‚
        """
        return {'segment': {'predictor': Predictor}}
```

### ä»£ç æ ¸å¿ƒéƒ¨åˆ†è§£é‡Šï¼š
1. **SAM ç±»**ï¼šç»§æ‰¿è‡ª `Model` ç±»ï¼Œè´Ÿè´£å®ç°å›¾åƒåˆ†å‰²çš„æ ¸å¿ƒåŠŸèƒ½ã€‚
2. **åˆå§‹åŒ–æ–¹æ³• `__init__`**ï¼šç”¨äºåŠ è½½é¢„è®­ç»ƒæ¨¡å‹ï¼Œç¡®ä¿æ¨¡å‹æ–‡ä»¶æ ¼å¼æ­£ç¡®ã€‚
3. **é¢„æµ‹æ–¹æ³• `predict`**ï¼šæ‰§è¡Œå›¾åƒåˆ†å‰²é¢„æµ‹ï¼Œæ”¯æŒå¤šç§è¾“å…¥æ ¼å¼å’Œæç¤ºæ–¹å¼ã€‚
4. **è°ƒç”¨æ–¹æ³• `__call__`**ï¼šæä¾›äº†ä¸€ä¸ªä¾¿æ·çš„æ¥å£æ¥è°ƒç”¨ `predict` æ–¹æ³•ã€‚
5. **ä¿¡æ¯æ–¹æ³• `info`**ï¼šç”¨äºè·å–å’Œè®°å½•æ¨¡å‹çš„è¯¦ç»†ä¿¡æ¯ã€‚
6. **ä»»åŠ¡æ˜ å°„å±æ€§ `task_map`**ï¼šæä¾›ä»»åŠ¡ä¸é¢„æµ‹å™¨ä¹‹é—´çš„æ˜ å°„å…³ç³»ã€‚

è¯¥ç¨‹åºæ–‡ä»¶æ˜¯Ultralytics YOLOé¡¹ç›®ä¸­çš„ä¸€ä¸ªæ¨¡å—ï¼Œä¸»è¦ç”¨äºå®ç°Segment Anything Modelï¼ˆSAMï¼‰çš„æ¥å£ã€‚SAMæ¨¡å‹ä¸“ä¸ºå®æ—¶å›¾åƒåˆ†å‰²ä»»åŠ¡è®¾è®¡ï¼Œå…·å¤‡çµæ´»çš„æç¤ºæ€§åˆ†å‰²èƒ½åŠ›ï¼Œèƒ½å¤Ÿé€‚åº”ä¸åŒçš„å›¾åƒåˆ†æéœ€æ±‚ï¼Œå¹¶ä¸”ç»è¿‡SA-1Bæ•°æ®é›†çš„è®­ç»ƒï¼Œå…·å¤‡é›¶-shotæ€§èƒ½ï¼Œæ„å‘³ç€å®ƒå¯ä»¥åœ¨æ²¡æœ‰å…ˆå‰çŸ¥è¯†çš„æƒ…å†µä¸‹é€‚åº”æ–°çš„å›¾åƒåˆ†å¸ƒå’Œä»»åŠ¡ã€‚

åœ¨æ–‡ä»¶çš„å¼€å¤´ï¼Œé¦–å…ˆé€šè¿‡æ–‡æ¡£å­—ç¬¦ä¸²è¯¦ç»†æè¿°äº†SAMæ¨¡å‹çš„ä¸»è¦åŠŸèƒ½ï¼ŒåŒ…æ‹¬æç¤ºæ€§åˆ†å‰²ã€å®æ—¶æ€§èƒ½ã€é›¶-shotè¿ç§»èƒ½åŠ›ä»¥åŠè®­ç»ƒæ•°æ®é›†çš„ä¿¡æ¯ã€‚

æ¥ä¸‹æ¥ï¼Œç¨‹åºå¯¼å…¥äº†ä¸€äº›å¿…è¦çš„æ¨¡å—å’Œç±»ï¼ŒåŒ…æ‹¬`Path`ç”¨äºå¤„ç†æ–‡ä»¶è·¯å¾„ï¼Œ`Model`ç±»ç”¨äºæ„å»ºæ¨¡å‹çš„åŸºç¡€ï¼Œ`model_info`ç”¨äºè·å–æ¨¡å‹ä¿¡æ¯ï¼Œ`build_sam`ç”¨äºæ„å»ºSAMæ¨¡å‹ï¼Œ`Predictor`ç”¨äºé¢„æµ‹åŠŸèƒ½ã€‚

SAMç±»ç»§æ‰¿è‡ªModelç±»ï¼Œæ„é€ å‡½æ•°`__init__`ç”¨äºåˆå§‹åŒ–SAMæ¨¡å‹ï¼Œå¹¶æ¥å—ä¸€ä¸ªé¢„è®­ç»ƒæ¨¡å‹æ–‡ä»¶çš„è·¯å¾„ä½œä¸ºå‚æ•°ã€‚è‹¥æ–‡ä»¶æ‰©å±•åä¸æ˜¯`.pt`æˆ–`.pth`ï¼Œåˆ™ä¼šæŠ›å‡º`NotImplementedError`å¼‚å¸¸ï¼Œç¡®ä¿ç”¨æˆ·æä¾›çš„æ¨¡å‹æ–‡ä»¶æ˜¯æœ‰æ•ˆçš„ã€‚

`_load`æ–¹æ³•ç”¨äºåŠ è½½æŒ‡å®šçš„æƒé‡æ–‡ä»¶åˆ°SAMæ¨¡å‹ä¸­ï¼Œæ¥å—æƒé‡æ–‡ä»¶çš„è·¯å¾„å’Œä»»åŠ¡åç§°ä½œä¸ºå‚æ•°ã€‚

`predict`æ–¹æ³•æ˜¯è¯¥ç±»çš„æ ¸å¿ƒåŠŸèƒ½ä¹‹ä¸€ï¼Œç”¨äºå¯¹ç»™å®šçš„å›¾åƒæˆ–è§†é¢‘æºè¿›è¡Œåˆ†å‰²é¢„æµ‹ã€‚è¯¥æ–¹æ³•æ¥å—å¤šä¸ªå‚æ•°ï¼ŒåŒ…æ‹¬æºæ–‡ä»¶è·¯å¾„ã€æ˜¯å¦å¯ç”¨å®æ—¶æµã€ä»¥åŠç”¨äºæç¤ºåˆ†å‰²çš„è¾¹ç•Œæ¡†ã€ç‚¹å’Œæ ‡ç­¾ç­‰ã€‚å®ƒä¼šæ›´æ–°ä¸€äº›é»˜è®¤å‚æ•°ï¼Œå¹¶è°ƒç”¨çˆ¶ç±»çš„`predict`æ–¹æ³•è¿›è¡Œå®é™…çš„é¢„æµ‹ã€‚

`__call__`æ–¹æ³•æ˜¯`predict`æ–¹æ³•çš„åˆ«åï¼Œå…è®¸ç”¨æˆ·é€šè¿‡è°ƒç”¨å®ä¾‹æ¥è¿›è¡Œé¢„æµ‹ï¼Œç®€åŒ–äº†ä½¿ç”¨è¿‡ç¨‹ã€‚

`info`æ–¹æ³•ç”¨äºè®°å½•å’Œè¿”å›SAMæ¨¡å‹çš„ä¿¡æ¯ï¼Œç”¨æˆ·å¯ä»¥é€‰æ‹©æ˜¯å¦æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯å’Œæ§åˆ¶å°è¾“å‡ºã€‚

æœ€åï¼Œ`task_map`å±æ€§æä¾›äº†ä¸€ä¸ªä»»åŠ¡æ˜ å°„ï¼Œå°†â€œsegmentâ€ä»»åŠ¡æ˜ å°„åˆ°å…¶å¯¹åº”çš„`Predictor`ï¼Œä¾¿äºåç»­çš„ä»»åŠ¡ç®¡ç†å’Œè°ƒç”¨ã€‚

æ•´ä½“æ¥çœ‹ï¼Œè¯¥æ–‡ä»¶ä¸ºSAMæ¨¡å‹æä¾›äº†ä¸€ä¸ªæ¸…æ™°çš„æ¥å£ï¼Œä¾¿äºç”¨æˆ·è¿›è¡Œå›¾åƒåˆ†å‰²ä»»åŠ¡çš„å®ç°å’Œè°ƒç”¨ã€‚

#### 11.5 train.py

ä»¥ä¸‹æ˜¯ä»£ç ä¸­æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ï¼Œå¹¶é™„ä¸Šè¯¦ç»†çš„ä¸­æ–‡æ³¨é‡Šï¼š

```python
class DetectionTrainer(BaseTrainer):
    """
    æ‰©å±•è‡ª BaseTrainer ç±»çš„æ£€æµ‹æ¨¡å‹è®­ç»ƒç±»ã€‚
    """

    def build_dataset(self, img_path, mode="train", batch=None):
        """
        æ„å»º YOLO æ•°æ®é›†ã€‚

        å‚æ•°:
            img_path (str): åŒ…å«å›¾åƒçš„æ–‡ä»¶å¤¹è·¯å¾„ã€‚
            mode (str): æ¨¡å¼ï¼Œ`train` è¡¨ç¤ºè®­ç»ƒæ¨¡å¼ï¼Œ`val` è¡¨ç¤ºéªŒè¯æ¨¡å¼ï¼Œç”¨æˆ·å¯ä»¥ä¸ºæ¯ç§æ¨¡å¼è‡ªå®šä¹‰ä¸åŒçš„æ•°æ®å¢å¼ºã€‚
            batch (int, optional): æ‰¹æ¬¡å¤§å°ï¼Œä»…ç”¨äº `rect` æ¨¡å¼ã€‚é»˜è®¤ä¸º Noneã€‚
        """
        gs = max(int(de_parallel(self.model).stride.max() if self.model else 0), 32)  # è·å–æ¨¡å‹çš„æœ€å¤§æ­¥å¹…
        return build_yolo_dataset(self.args, img_path, batch, self.data, mode=mode, rect=mode == "val", stride=gs)

    def get_dataloader(self, dataset_path, batch_size=16, rank=0, mode="train"):
        """æ„é€ å¹¶è¿”å›æ•°æ®åŠ è½½å™¨ã€‚"""
        assert mode in ["train", "val"]  # ç¡®ä¿æ¨¡å¼æœ‰æ•ˆ
        with torch_distributed_zero_first(rank):  # ä»…åœ¨ DDP æ¨¡å¼ä¸‹åˆå§‹åŒ–æ•°æ®é›† *.cache ä¸€æ¬¡
            dataset = self.build_dataset(dataset_path, mode, batch_size)  # æ„å»ºæ•°æ®é›†
        shuffle = mode == "train"  # è®­ç»ƒæ¨¡å¼ä¸‹æ‰“ä¹±æ•°æ®
        if getattr(dataset, "rect", False) and shuffle:
            LOGGER.warning("WARNING âš ï¸ 'rect=True' ä¸ DataLoader shuffle ä¸å…¼å®¹ï¼Œè®¾ç½® shuffle=False")
            shuffle = False  # å¦‚æœæ˜¯çŸ©å½¢æ¨¡å¼ä¸”éœ€è¦æ‰“ä¹±ï¼Œåˆ™ä¸æ‰“ä¹±
        workers = self.args.workers if mode == "train" else self.args.workers * 2  # è®¾ç½®å·¥ä½œçº¿ç¨‹æ•°
        return build_dataloader(dataset, batch_size, workers, shuffle, rank)  # è¿”å›æ•°æ®åŠ è½½å™¨

    def preprocess_batch(self, batch):
        """å¯¹ä¸€æ‰¹å›¾åƒè¿›è¡Œé¢„å¤„ç†ï¼ŒåŒ…æ‹¬ç¼©æ”¾å’Œè½¬æ¢ä¸ºæµ®ç‚¹æ•°ã€‚"""
        batch["img"] = batch["img"].to(self.device, non_blocking=True).float() / 255  # å°†å›¾åƒè½¬æ¢ä¸ºæµ®ç‚¹æ•°å¹¶å½’ä¸€åŒ–
        if self.args.multi_scale:  # å¦‚æœå¯ç”¨å¤šå°ºåº¦è®­ç»ƒ
            imgs = batch["img"]
            sz = (
                random.randrange(self.args.imgsz * 0.5, self.args.imgsz * 1.5 + self.stride)
                // self.stride
                * self.stride
            )  # éšæœºé€‰æ‹©ä¸€ä¸ªå°ºå¯¸
            sf = sz / max(imgs.shape[2:])  # è®¡ç®—ç¼©æ”¾å› å­
            if sf != 1:
                ns = [
                    math.ceil(x * sf / self.stride) * self.stride for x in imgs.shape[2:]
                ]  # è®¡ç®—æ–°çš„å½¢çŠ¶
                imgs = nn.functional.interpolate(imgs, size=ns, mode="bilinear", align_corners=False)  # è¿›è¡Œæ’å€¼è°ƒæ•´
            batch["img"] = imgs  # æ›´æ–°æ‰¹æ¬¡å›¾åƒ
        return batch

    def get_model(self, cfg=None, weights=None, verbose=True):
        """è¿”å› YOLO æ£€æµ‹æ¨¡å‹ã€‚"""
        model = DetectionModel(cfg, nc=self.data["nc"], verbose=verbose and RANK == -1)  # åˆ›å»ºæ£€æµ‹æ¨¡å‹
        if weights:
            model.load(weights)  # åŠ è½½æƒé‡
        return model

    def get_validator(self):
        """è¿”å›ç”¨äº YOLO æ¨¡å‹éªŒè¯çš„ DetectionValidatorã€‚"""
        self.loss_names = "box_loss", "cls_loss", "dfl_loss"  # å®šä¹‰æŸå¤±åç§°
        return yolo.detect.DetectionValidator(
            self.test_loader, save_dir=self.save_dir, args=copy(self.args), _callbacks=self.callbacks
        )  # è¿”å›éªŒè¯å™¨

    def plot_training_samples(self, batch, ni):
        """ç»˜åˆ¶å¸¦æœ‰æ³¨é‡Šçš„è®­ç»ƒæ ·æœ¬ã€‚"""
        plot_images(
            images=batch["img"],
            batch_idx=batch["batch_idx"],
            cls=batch["cls"].squeeze(-1),
            bboxes=batch["bboxes"],
            paths=batch["im_file"],
            fname=self.save_dir / f"train_batch{ni}.jpg",
            on_plot=self.on_plot,
        )  # ç»˜åˆ¶å›¾åƒå¹¶ä¿å­˜

    def plot_metrics(self):
        """ä» CSV æ–‡ä»¶ä¸­ç»˜åˆ¶æŒ‡æ ‡ã€‚"""
        plot_results(file=self.csv, on_plot=self.on_plot)  # ä¿å­˜ç»“æœå›¾
```

### ä»£ç æ ¸å¿ƒéƒ¨åˆ†è¯´æ˜ï¼š
1. **DetectionTrainer ç±»**ï¼šè¿™æ˜¯ä¸€ä¸ªç”¨äºè®­ç»ƒæ£€æµ‹æ¨¡å‹çš„ç±»ï¼Œç»§æ‰¿è‡ª `BaseTrainer`ã€‚
2. **build_dataset æ–¹æ³•**ï¼šæ„å»º YOLO æ•°æ®é›†ï¼Œæ”¯æŒè®­ç»ƒå’ŒéªŒè¯æ¨¡å¼ã€‚
3. **get_dataloader æ–¹æ³•**ï¼šæ„é€ æ•°æ®åŠ è½½å™¨ï¼Œæ”¯æŒå¤šçº¿ç¨‹å’Œæ•°æ®æ‰“ä¹±ã€‚
4. **preprocess_batch æ–¹æ³•**ï¼šå¯¹è¾“å…¥å›¾åƒè¿›è¡Œé¢„å¤„ç†ï¼ŒåŒ…æ‹¬å½’ä¸€åŒ–å’Œå¤šå°ºåº¦è°ƒæ•´ã€‚
5. **get_model æ–¹æ³•**ï¼šåˆ›å»ºå¹¶è¿”å› YOLO æ£€æµ‹æ¨¡å‹ï¼Œæ”¯æŒåŠ è½½é¢„è®­ç»ƒæƒé‡ã€‚
6. **get_validator æ–¹æ³•**ï¼šè¿”å›ç”¨äºæ¨¡å‹éªŒè¯çš„å¯¹è±¡ã€‚
7. **plot_training_samples å’Œ plot_metrics æ–¹æ³•**ï¼šç”¨äºå¯è§†åŒ–è®­ç»ƒæ ·æœ¬å’Œè®­ç»ƒæŒ‡æ ‡çš„ç»˜å›¾åŠŸèƒ½ã€‚

è¿™ä¸ªç¨‹åºæ–‡ä»¶ `train.py` æ˜¯ä¸€ä¸ªç”¨äºè®­ç»ƒ YOLOï¼ˆYou Only Look Onceï¼‰ç›®æ ‡æ£€æµ‹æ¨¡å‹çš„å®ç°ï¼Œç»§æ‰¿è‡ª `BaseTrainer` ç±»ã€‚ç¨‹åºä¸­åŒ…å«äº†å¤šä¸ªæ–¹æ³•ï¼Œç”¨äºæ„å»ºæ•°æ®é›†ã€è·å–æ•°æ®åŠ è½½å™¨ã€é¢„å¤„ç†å›¾åƒæ‰¹æ¬¡ã€è®¾ç½®æ¨¡å‹å±æ€§ã€è·å–æ¨¡å‹ã€éªŒè¯æ¨¡å‹ã€è®°å½•æŸå¤±ã€æ˜¾ç¤ºè®­ç»ƒè¿›åº¦ã€ç»˜åˆ¶è®­ç»ƒæ ·æœ¬å’Œç»˜åˆ¶è®­ç»ƒæŒ‡æ ‡ç­‰ã€‚

é¦–å…ˆï¼Œ`DetectionTrainer` ç±»çš„ `build_dataset` æ–¹æ³•ç”¨äºæ„å»º YOLO æ•°æ®é›†ã€‚å®ƒæ¥æ”¶å›¾åƒè·¯å¾„ã€æ¨¡å¼ï¼ˆè®­ç»ƒæˆ–éªŒè¯ï¼‰å’Œæ‰¹æ¬¡å¤§å°ä½œä¸ºå‚æ•°ï¼Œå¹¶æ ¹æ®æ¨¡å‹çš„æ­¥å¹…æ¥ç¡®å®šå›¾åƒçš„å°ºå¯¸ã€‚

æ¥ç€ï¼Œ`get_dataloader` æ–¹æ³•ç”¨äºæ„å»ºå¹¶è¿”å›æ•°æ®åŠ è½½å™¨ã€‚å®ƒä¼šæ ¹æ®æ¨¡å¼ï¼ˆè®­ç»ƒæˆ–éªŒè¯ï¼‰æ¥åˆå§‹åŒ–æ•°æ®é›†ï¼Œå¹¶è®¾ç½®æ˜¯å¦æ‰“ä¹±æ•°æ®ã€‚è¯¥æ–¹æ³•è¿˜è€ƒè™‘äº†åˆ†å¸ƒå¼è®­ç»ƒçš„æƒ…å†µï¼Œä»¥ç¡®ä¿æ•°æ®é›†åªåˆå§‹åŒ–ä¸€æ¬¡ã€‚

åœ¨ `preprocess_batch` æ–¹æ³•ä¸­ï¼Œç¨‹åºå¯¹å›¾åƒæ‰¹æ¬¡è¿›è¡Œé¢„å¤„ç†ï¼ŒåŒ…æ‹¬å°†å›¾åƒç¼©æ”¾åˆ°åˆé€‚çš„å¤§å°å¹¶è½¬æ¢ä¸ºæµ®ç‚¹æ•°ã€‚è¿™é‡Œè¿˜å®ç°äº†å¤šå°ºåº¦è®­ç»ƒçš„åŠŸèƒ½ï¼Œé€šè¿‡éšæœºé€‰æ‹©å›¾åƒçš„å°ºå¯¸æ¥å¢å¼ºæ¨¡å‹çš„é²æ£’æ€§ã€‚

`set_model_attributes` æ–¹æ³•ç”¨äºè®¾ç½®æ¨¡å‹çš„å±æ€§ï¼ŒåŒ…æ‹¬ç±»åˆ«æ•°é‡å’Œç±»åˆ«åç§°ã€‚è¿™äº›ä¿¡æ¯æ˜¯ä»æ•°æ®é›†ä¸­æå–çš„ï¼Œå¹¶é™„åŠ åˆ°æ¨¡å‹ä¸Šã€‚

`get_model` æ–¹æ³•è¿”å›ä¸€ä¸ª YOLO æ£€æµ‹æ¨¡å‹ï¼Œå¹¶å¯ä»¥é€‰æ‹©åŠ è½½é¢„è®­ç»ƒæƒé‡ã€‚`get_validator` æ–¹æ³•åˆ™è¿”å›ä¸€ä¸ªç”¨äºéªŒè¯æ¨¡å‹çš„éªŒè¯å™¨ã€‚

åœ¨æŸå¤±è®°å½•æ–¹é¢ï¼Œ`label_loss_items` æ–¹æ³•è¿”å›ä¸€ä¸ªåŒ…å«è®­ç»ƒæŸå¤±é¡¹çš„å­—å…¸ï¼Œä¾¿äºåç»­åˆ†æå’Œè®°å½•ã€‚

`progress_string` æ–¹æ³•ç”Ÿæˆä¸€ä¸ªæ ¼å¼åŒ–çš„å­—ç¬¦ä¸²ï¼Œç”¨äºæ˜¾ç¤ºè®­ç»ƒè¿›åº¦ï¼ŒåŒ…æ‹¬å½“å‰çš„è½®æ¬¡ã€GPU å†…å­˜ä½¿ç”¨æƒ…å†µã€æŸå¤±å€¼ã€å®ä¾‹æ•°é‡å’Œå›¾åƒå¤§å°ç­‰ä¿¡æ¯ã€‚

æ­¤å¤–ï¼Œ`plot_training_samples` æ–¹æ³•ç”¨äºç»˜åˆ¶è®­ç»ƒæ ·æœ¬åŠå…¶æ ‡æ³¨ï¼Œä¾¿äºå¯è§†åŒ–è®­ç»ƒè¿‡ç¨‹ä¸­çš„æ•°æ®ã€‚`plot_metrics` å’Œ `plot_training_labels` æ–¹æ³•åˆ™åˆ†åˆ«ç”¨äºç»˜åˆ¶è®­ç»ƒæŒ‡æ ‡å’Œåˆ›å»ºå¸¦æ ‡ç­¾çš„è®­ç»ƒå›¾ï¼Œå¸®åŠ©ç”¨æˆ·æ›´å¥½åœ°ç†è§£æ¨¡å‹çš„è®­ç»ƒæ•ˆæœã€‚

æ€»ä½“è€Œè¨€ï¼Œè¿™ä¸ªæ–‡ä»¶æä¾›äº†ä¸€ä¸ªå®Œæ•´çš„æ¡†æ¶ï¼Œç”¨äºè®­ç»ƒ YOLO æ¨¡å‹ï¼Œæ¶µç›–äº†æ•°æ®å¤„ç†ã€æ¨¡å‹æ„å»ºã€è®­ç»ƒè¿‡ç¨‹ç›‘æ§å’Œç»“æœå¯è§†åŒ–ç­‰å¤šä¸ªæ–¹é¢ã€‚

#### 11.6 code\ultralytics\models\rtdetr\val.py

ä»¥ä¸‹æ˜¯ä»£ç ä¸­æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ï¼Œå¹¶é™„ä¸Šè¯¦ç»†çš„ä¸­æ–‡æ³¨é‡Šï¼š

```python
import torch
from ultralytics.data import YOLODataset
from ultralytics.models.yolo.detect import DetectionValidator
from ultralytics.utils import ops

class RTDETRDataset(YOLODataset):
    """
    å®æ—¶æ£€æµ‹ä¸è·Ÿè¸ª (RT-DETR) æ•°æ®é›†ç±»ï¼Œç»§æ‰¿è‡ªåŸºç¡€çš„ YOLODataset ç±»ã€‚
    è¯¥ä¸“ç”¨æ•°æ®é›†ç±»æ—¨åœ¨ä¸ RT-DETR ç›®æ ‡æ£€æµ‹æ¨¡å‹ä¸€èµ·ä½¿ç”¨ï¼Œå¹¶é’ˆå¯¹å®æ—¶æ£€æµ‹å’Œè·Ÿè¸ªä»»åŠ¡è¿›è¡Œäº†ä¼˜åŒ–ã€‚
    """

    def __init__(self, *args, data=None, **kwargs):
        """åˆå§‹åŒ– RTDETRDataset ç±»ï¼Œé€šè¿‡ç»§æ‰¿ YOLODataset ç±»ã€‚"""
        super().__init__(*args, data=data, **kwargs)

    def load_image(self, i, rect_mode=False):
        """ä»æ•°æ®é›†ä¸­åŠ è½½ç´¢å¼•ä¸º 'i' çš„å›¾åƒï¼Œè¿”å› (im, resized hw)ã€‚"""
        return super().load_image(i=i, rect_mode=rect_mode)

    def build_transforms(self, hyp=None):
        """æ„å»ºå›¾åƒå˜æ¢ï¼Œä¸»è¦ç”¨äºè¯„ä¼°é˜¶æ®µã€‚"""
        if self.augment:
            # æ ¹æ®å¢å¼ºæ¡ä»¶è®¾ç½®é©¬èµ›å…‹å’Œæ··åˆå¢å¼ºçš„å‚æ•°
            hyp.mosaic = hyp.mosaic if self.augment and not self.rect else 0.0
            hyp.mixup = hyp.mixup if self.augment and not self.rect else 0.0
            transforms = v8_transforms(self, self.imgsz, hyp, stretch=True)
        else:
            transforms = Compose([])  # ä¸è¿›è¡Œä»»ä½•å˜æ¢

        # æ·»åŠ æ ¼å¼åŒ–å˜æ¢
        transforms.append(
            Format(
                bbox_format="xywh",  # è¾¹ç•Œæ¡†æ ¼å¼ä¸º xywh
                normalize=True,  # å½’ä¸€åŒ–
                return_mask=self.use_segments,  # æ˜¯å¦è¿”å›åˆ†å‰²æ©ç 
                return_keypoint=self.use_keypoints,  # æ˜¯å¦è¿”å›å…³é”®ç‚¹
                batch_idx=True,  # è¿”å›æ‰¹æ¬¡ç´¢å¼•
                mask_ratio=hyp.mask_ratio,  # æ©ç æ¯”ä¾‹
                mask_overlap=hyp.overlap_mask,  # æ©ç é‡å 
            )
        )
        return transforms


class RTDETRValidator(DetectionValidator):
    """
    RTDETRValidator ç»§æ‰¿è‡ª DetectionValidator ç±»ï¼Œæä¾›ä¸“é—¨é’ˆå¯¹ RT-DETR ç›®æ ‡æ£€æµ‹æ¨¡å‹çš„éªŒè¯åŠŸèƒ½ã€‚
    è¯¥ç±»å…è®¸æ„å»º RTDETR ç‰¹å®šçš„æ•°æ®é›†è¿›è¡ŒéªŒè¯ï¼Œåº”ç”¨éæå¤§å€¼æŠ‘åˆ¶è¿›è¡Œåå¤„ç†ï¼Œå¹¶ç›¸åº”æ›´æ–°è¯„ä¼°æŒ‡æ ‡ã€‚
    """

    def build_dataset(self, img_path, mode="val", batch=None):
        """
        æ„å»º RTDETR æ•°æ®é›†ã€‚

        å‚æ•°:
            img_path (str): åŒ…å«å›¾åƒçš„æ–‡ä»¶å¤¹è·¯å¾„ã€‚
            mode (str): `train` æ¨¡å¼æˆ– `val` æ¨¡å¼ï¼Œç”¨æˆ·å¯ä»¥ä¸ºæ¯ç§æ¨¡å¼è‡ªå®šä¹‰ä¸åŒçš„å¢å¼ºã€‚
            batch (int, optional): æ‰¹æ¬¡å¤§å°ï¼Œä»…é€‚ç”¨äº `rect` æ¨¡å¼ã€‚é»˜è®¤ä¸º Noneã€‚
        """
        return RTDETRDataset(
            img_path=img_path,
            imgsz=self.args.imgsz,
            batch_size=batch,
            augment=False,  # ä¸è¿›è¡Œå¢å¼º
            hyp=self.args,
            rect=False,  # ä¸ä½¿ç”¨çŸ©å½¢æ¨¡å¼
            cache=self.args.cache or None,
            prefix=colorstr(f"{mode}: "),
            data=self.data,
        )

    def postprocess(self, preds):
        """å¯¹é¢„æµ‹è¾“å‡ºåº”ç”¨éæå¤§å€¼æŠ‘åˆ¶ã€‚"""
        bs, _, nd = preds[0].shape  # è·å–æ‰¹æ¬¡å¤§å°ã€é€šé“æ•°å’Œæ£€æµ‹æ¡†æ•°é‡
        bboxes, scores = preds[0].split((4, nd - 4), dim=-1)  # åˆ†ç¦»è¾¹ç•Œæ¡†å’Œåˆ†æ•°
        bboxes *= self.args.imgsz  # å°†è¾¹ç•Œæ¡†ç¼©æ”¾åˆ°åŸå§‹å›¾åƒå¤§å°
        outputs = [torch.zeros((0, 6), device=bboxes.device)] * bs  # åˆå§‹åŒ–è¾“å‡º

        for i, bbox in enumerate(bboxes):  # éå†æ¯ä¸ªè¾¹ç•Œæ¡†
            bbox = ops.xywh2xyxy(bbox)  # å°†è¾¹ç•Œæ¡†æ ¼å¼ä» xywh è½¬æ¢ä¸º xyxy
            score, cls = scores[i].max(-1)  # è·å–æ¯ä¸ªè¾¹ç•Œæ¡†çš„æœ€å¤§åˆ†æ•°å’Œç±»åˆ«
            pred = torch.cat([bbox, score[..., None], cls[..., None]], dim=-1)  # åˆå¹¶è¾¹ç•Œæ¡†ã€åˆ†æ•°å’Œç±»åˆ«
            pred = pred[score.argsort(descending=True)]  # æŒ‰ç…§åˆ†æ•°æ’åº
            outputs[i] = pred  # ä¿å­˜é¢„æµ‹ç»“æœ

        return outputs

    def _prepare_batch(self, si, batch):
        """å‡†å¤‡è®­ç»ƒæˆ–æ¨ç†çš„æ‰¹æ¬¡ï¼Œé€šè¿‡åº”ç”¨å˜æ¢ã€‚"""
        idx = batch["batch_idx"] == si  # è·å–å½“å‰æ‰¹æ¬¡çš„ç´¢å¼•
        cls = batch["cls"][idx].squeeze(-1)  # è·å–ç±»åˆ«
        bbox = batch["bboxes"][idx]  # è·å–è¾¹ç•Œæ¡†
        ori_shape = batch["ori_shape"][si]  # è·å–åŸå§‹å›¾åƒå½¢çŠ¶
        imgsz = batch["img"].shape[2:]  # è·å–å›¾åƒå¤§å°
        ratio_pad = batch["ratio_pad"][si]  # è·å–å¡«å……æ¯”ä¾‹

        if len(cls):
            bbox = ops.xywh2xyxy(bbox)  # è½¬æ¢ç›®æ ‡æ¡†æ ¼å¼
            bbox[..., [0, 2]] *= ori_shape[1]  # è½¬æ¢ä¸ºåŸå§‹ç©ºé—´é¢„æµ‹
            bbox[..., [1, 3]] *= ori_shape[0]  # è½¬æ¢ä¸ºåŸå§‹ç©ºé—´é¢„æµ‹

        return dict(cls=cls, bbox=bbox, ori_shape=ori_shape, imgsz=imgsz, ratio_pad=ratio_pad)

    def _prepare_pred(self, pred, pbatch):
        """å‡†å¤‡å¹¶è¿”å›å¸¦æœ‰å˜æ¢åçš„è¾¹ç•Œæ¡†å’Œç±»åˆ«æ ‡ç­¾çš„æ‰¹æ¬¡ã€‚"""
        predn = pred.clone()  # å…‹éš†é¢„æµ‹ç»“æœ
        predn[..., [0, 2]] *= pbatch["ori_shape"][1] / self.args.imgsz  # è½¬æ¢ä¸ºåŸå§‹ç©ºé—´é¢„æµ‹
        predn[..., [1, 3]] *= pbatch["ori_shape"][0] / self.args.imgsz  # è½¬æ¢ä¸ºåŸå§‹ç©ºé—´é¢„æµ‹
        return predn.float()  # è¿”å›æµ®ç‚¹å‹çš„é¢„æµ‹ç»“æœ
```

### ä»£ç æ ¸å¿ƒéƒ¨åˆ†è§£é‡Šï¼š
1. **RTDETRDataset ç±»**ï¼šç»§æ‰¿è‡ª YOLODatasetï¼Œä¸»è¦ç”¨äºåŠ è½½å’Œå¤„ç† RT-DETR æ•°æ®é›†ï¼Œæ”¯æŒå›¾åƒåŠ è½½å’Œå˜æ¢ã€‚
2. **load_image æ–¹æ³•**ï¼šä»æ•°æ®é›†ä¸­åŠ è½½æŒ‡å®šç´¢å¼•çš„å›¾åƒã€‚
3. **build_transforms æ–¹æ³•**ï¼šæ„å»ºå›¾åƒå˜æ¢ï¼Œæ”¯æŒä¸åŒçš„å¢å¼ºç­–ç•¥ã€‚
4. **RTDETRValidator ç±»**ï¼šç»§æ‰¿è‡ª DetectionValidatorï¼Œä¸“é—¨ç”¨äº RT-DETR æ¨¡å‹çš„éªŒè¯ï¼ŒåŒ…å«æ•°æ®é›†æ„å»ºã€åå¤„ç†å’Œæ‰¹æ¬¡å‡†å¤‡ç­‰åŠŸèƒ½ã€‚
5. **postprocess æ–¹æ³•**ï¼šå¯¹æ¨¡å‹é¢„æµ‹ç»“æœè¿›è¡Œéæå¤§å€¼æŠ‘åˆ¶ï¼Œè¿‡æ»¤æ‰å†—ä½™çš„è¾¹ç•Œæ¡†ã€‚
6. **_prepare_batch å’Œ _prepare_pred æ–¹æ³•**ï¼šç”¨äºå‡†å¤‡è®­ç»ƒæˆ–æ¨ç†æ‰€éœ€çš„æ‰¹æ¬¡æ•°æ®å’Œé¢„æµ‹ç»“æœã€‚

è¿™ä¸ªç¨‹åºæ–‡ä»¶æ˜¯ä¸€ä¸ªç”¨äºå®æ—¶ç›®æ ‡æ£€æµ‹å’Œè·Ÿè¸ªçš„éªŒè¯æ¨¡å—ï¼Œä¸»è¦åŸºäºUltralyticsçš„YOLOæ¨¡å‹ã€‚æ–‡ä»¶ä¸­å®šä¹‰äº†ä¸¤ä¸ªä¸»è¦çš„ç±»ï¼š`RTDETRDataset`å’Œ`RTDETRValidator`ï¼Œå®ƒä»¬åˆ†åˆ«ç”¨äºå¤„ç†æ•°æ®é›†å’ŒéªŒè¯æ¨¡å‹ã€‚

`RTDETRDataset`ç±»ç»§æ‰¿è‡ª`YOLODataset`ï¼Œç”¨äºåˆ›å»ºä¸€ä¸ªä¸“é—¨ä¸ºRT-DETRæ¨¡å‹è®¾è®¡çš„æ•°æ®é›†ã€‚è¯¥ç±»çš„æ„é€ å‡½æ•°è°ƒç”¨äº†çˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼Œå¹¶åœ¨`load_image`æ–¹æ³•ä¸­é‡è½½äº†å›¾åƒåŠ è½½çš„æ–¹å¼ï¼Œä»¥é€‚åº”RT-DETRçš„éœ€æ±‚ã€‚`build_transforms`æ–¹æ³•ç”¨äºæ„å»ºæ•°æ®å¢å¼ºçš„å˜æ¢ï¼Œä¸»è¦æ˜¯é’ˆå¯¹è¯„ä¼°é˜¶æ®µè¿›è¡Œçš„è®¾ç½®ã€‚å®ƒä¼šæ ¹æ®ä¼ å…¥çš„è¶…å‚æ•°ï¼ˆhypï¼‰æ¥å†³å®šæ˜¯å¦åº”ç”¨æŸäº›å˜æ¢ï¼Œå¹¶æœ€ç»ˆè¿”å›ä¸€ä¸ªåŒ…å«æ ¼å¼åŒ–å’Œå½’ä¸€åŒ–è®¾ç½®çš„å˜æ¢åˆ—è¡¨ã€‚

`RTDETRValidator`ç±»åˆ™ç»§æ‰¿è‡ª`DetectionValidator`ï¼Œä¸ºRT-DETRæ¨¡å‹æä¾›ç‰¹å®šçš„éªŒè¯åŠŸèƒ½ã€‚å®ƒçš„`build_dataset`æ–¹æ³•ç”¨äºæ„å»ºRT-DETRæ•°æ®é›†ï¼Œå…è®¸ç”¨æˆ·è‡ªå®šä¹‰è®­ç»ƒå’ŒéªŒè¯æ¨¡å¼ä¸‹çš„ä¸åŒæ•°æ®å¢å¼ºç­–ç•¥ã€‚`postprocess`æ–¹æ³•å®ç°äº†éæå¤§å€¼æŠ‘åˆ¶ï¼ˆNMSï¼‰ï¼Œç”¨äºå¤„ç†æ¨¡å‹çš„é¢„æµ‹è¾“å‡ºï¼Œä»¥å‡å°‘å†—ä½™çš„è¾¹ç•Œæ¡†å¹¶æå‡æ£€æµ‹ç²¾åº¦ã€‚è¯¥æ–¹æ³•ä¼šå¯¹é¢„æµ‹çš„è¾¹ç•Œæ¡†è¿›è¡Œå¤„ç†ï¼Œæå–å‡ºç½®ä¿¡åº¦å’Œç±»åˆ«ä¿¡æ¯ï¼Œå¹¶æ ¹æ®ç½®ä¿¡åº¦è¿›è¡Œæ’åºã€‚`_prepare_batch`å’Œ`_prepare_pred`æ–¹æ³•åˆ™åˆ†åˆ«ç”¨äºå‡†å¤‡è¾“å…¥æ‰¹æ¬¡å’Œå¤„ç†é¢„æµ‹ç»“æœï¼Œç¡®ä¿åœ¨è¿›è¡Œè®­ç»ƒæˆ–æ¨ç†æ—¶æ•°æ®çš„æ ¼å¼å’Œå°ºåº¦æ­£ç¡®ã€‚

æ•´ä½“æ¥çœ‹ï¼Œè¿™ä¸ªæ–‡ä»¶ä¸ºRT-DETRæ¨¡å‹çš„éªŒè¯è¿‡ç¨‹æä¾›äº†å¿…è¦çš„å·¥å…·å’Œæ–¹æ³•ï¼Œç¡®ä¿æ¨¡å‹åœ¨å®é™…åº”ç”¨ä¸­çš„æœ‰æ•ˆæ€§å’Œå‡†ç¡®æ€§ã€‚

### 12.ç³»ç»Ÿæ•´ä½“ç»“æ„ï¼ˆèŠ‚é€‰ï¼‰

### æ•´ä½“åŠŸèƒ½å’Œæ„æ¶æ¦‚æ‹¬

è¯¥é¡¹ç›®æ˜¯ä¸€ä¸ªåŸºäºUltralytics YOLOæ¡†æ¶çš„ç›®æ ‡æ£€æµ‹å’Œåˆ†å‰²ç³»ç»Ÿï¼Œæ—¨åœ¨æä¾›å¤šç§YOLOæ¨¡å‹çš„è®­ç»ƒã€éªŒè¯å’Œæ¨ç†åŠŸèƒ½ã€‚é¡¹ç›®çš„æ ¸å¿ƒåŠŸèƒ½åŒ…æ‹¬ï¼š

1. **æ¨¡å‹è®­ç»ƒ**ï¼šé€šè¿‡`train.py`æ–‡ä»¶å®ç°YOLOæ¨¡å‹çš„è®­ç»ƒè¿‡ç¨‹ï¼Œæ”¯æŒæ•°æ®é›†æ„å»ºã€æ•°æ®åŠ è½½ã€æ¨¡å‹å±æ€§è®¾ç½®å’Œè®­ç»ƒè¿›åº¦ç›‘æ§ç­‰åŠŸèƒ½ã€‚
2. **æ¨¡å‹éªŒè¯**ï¼šé€šè¿‡`val.py`æ–‡ä»¶å®ç°å¯¹å®æ—¶ç›®æ ‡æ£€æµ‹æ¨¡å‹ï¼ˆå¦‚RT-DETRï¼‰çš„éªŒè¯ï¼Œç¡®ä¿æ¨¡å‹åœ¨æ¨ç†æ—¶çš„å‡†ç¡®æ€§å’Œæœ‰æ•ˆæ€§ã€‚
3. **åˆ†å‰²é¢„æµ‹**ï¼šé€šè¿‡`predict.py`æ–‡ä»¶å®ç°å¿«é€ŸSAMï¼ˆSegment Anything Modelï¼‰åˆ†å‰²é¢„æµ‹ï¼Œæ”¯æŒå¯¹å›¾åƒè¿›è¡Œé«˜æ•ˆçš„åˆ†å‰²å¤„ç†ã€‚
4. **ç”¨æˆ·ç•Œé¢**ï¼šé€šè¿‡`ui.py`æ–‡ä»¶æä¾›ä¸€ä¸ªç®€å•çš„ç”¨æˆ·ç•Œé¢ï¼Œç”¨äºè¿è¡Œå’Œç®¡ç†æ¨¡å‹çš„æ¨ç†è¿‡ç¨‹ã€‚
5. **æ¨¡å—åŒ–è®¾è®¡**ï¼šé€šè¿‡`__init__.py`æ–‡ä»¶å°†å„ä¸ªæ¨¡å—ï¼ˆå¦‚SAMå’ŒYOLOï¼‰è¿›è¡Œç»„ç»‡å’Œå¯¼å…¥ï¼Œä¾¿äºä½¿ç”¨å’Œæ‰©å±•ã€‚

é¡¹ç›®çš„ç»“æ„æ¸…æ™°ï¼Œæ¨¡å—ä¹‹é—´é€šè¿‡ç±»å’Œæ–¹æ³•è¿›è¡Œäº¤äº’ï¼Œæ”¯æŒçµæ´»çš„æ‰©å±•å’Œå®šåˆ¶ï¼Œé€‚åˆäºå„ç§ç›®æ ‡æ£€æµ‹å’Œåˆ†å‰²ä»»åŠ¡ã€‚

### æ–‡ä»¶åŠŸèƒ½æ•´ç†è¡¨

| æ–‡ä»¶è·¯å¾„                                                                                     | åŠŸèƒ½æè¿°                                                                                   |
|----------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------|
| `ultralytics/models/fastsam/predict.py`                                                     | å®ç°å¿«é€ŸSAMåˆ†å‰²é¢„æµ‹çš„åå¤„ç†é€»è¾‘ï¼Œæ”¯æŒéæå¤§å€¼æŠ‘åˆ¶å’Œç»“æœæ ¼å¼åŒ–ã€‚                                       |
| `ui.py`                                                                                     | æä¾›ç”¨æˆ·ç•Œé¢ï¼Œé€šè¿‡å‘½ä»¤è¡Œè¿è¡ŒæŒ‡å®šçš„è„šæœ¬ï¼ˆå¦‚`web.py`ï¼‰ã€‚                                      |
| `ultralytics/models/sam/__init__.py`                                                       | å®šä¹‰SAMæ¨¡å—çš„å…¬å…±æ¥å£ï¼Œå¯¼å…¥`SAM`å’Œ`Predictor`ç±»ã€‚                                        |
| `ultralytics/models/sam/model.py`                                                           | å®ç°SAMæ¨¡å‹çš„æ„å»ºå’Œé¢„æµ‹åŠŸèƒ½ï¼Œæ”¯æŒæ¨¡å‹åŠ è½½å’Œå›¾åƒåˆ†å‰²ã€‚                                       |
| `train.py`                                                                                  | å®ç°YOLOæ¨¡å‹çš„è®­ç»ƒè¿‡ç¨‹ï¼ŒåŒ…æ‹¬æ•°æ®é›†æ„å»ºã€æ•°æ®åŠ è½½ã€è®­ç»ƒç›‘æ§ç­‰åŠŸèƒ½ã€‚                          |
| `ultralytics/models/rtdetr/val.py`                                                          | æä¾›RT-DETRæ¨¡å‹çš„éªŒè¯åŠŸèƒ½ï¼Œæ”¯æŒæ•°æ®é›†æ„å»ºå’Œé¢„æµ‹ç»“æœå¤„ç†ã€‚                                   |
| `ultralytics/data/converter.py`                                                             | å®ç°æ•°æ®æ ¼å¼è½¬æ¢åŠŸèƒ½ï¼Œæ”¯æŒä¸åŒæ•°æ®é›†æ ¼å¼ä¹‹é—´çš„è½¬æ¢ã€‚                                        |
| `ultralytics/utils/callbacks/__init__.py`                                                  | å®šä¹‰å›è°ƒå‡½æ•°çš„æ¥å£ï¼Œæ”¯æŒè®­ç»ƒè¿‡ç¨‹ä¸­çš„è‡ªå®šä¹‰å›è°ƒã€‚                                            |
| `ultralytics/utils/triton.py`                                                               | æä¾›ä¸Tritonæ¨ç†æœåŠ¡å™¨çš„é›†æˆï¼Œæ”¯æŒæ¨¡å‹çš„é«˜æ•ˆæ¨ç†ã€‚                                          |
| `ultralytics/models/yolo/pose/predict.py`                                                  | å®ç°YOLOå§¿æ€ä¼°è®¡æ¨¡å‹çš„é¢„æµ‹åŠŸèƒ½ï¼Œæ”¯æŒå¯¹å§¿æ€çš„æ£€æµ‹å’Œåˆ†æã€‚                                     |
| `log.py`                                                                                    | å®ç°æ—¥å¿—è®°å½•åŠŸèƒ½ï¼Œæ”¯æŒè®­ç»ƒå’Œæ¨ç†è¿‡ç¨‹ä¸­çš„ä¿¡æ¯è®°å½•ã€‚                                          |
| `ultralytics/data/explorer/gui/__init__.py`                                                | æä¾›æ•°æ®é›†æµè§ˆå™¨çš„ç”¨æˆ·ç•Œé¢ï¼Œæ”¯æŒå¯è§†åŒ–æ•°æ®é›†å†…å®¹ã€‚                                          |
| `ultralytics/models/yolo/detect/__init__.py`                                               | å®šä¹‰YOLOæ£€æµ‹æ¨¡å—çš„å…¬å…±æ¥å£ï¼Œä¾¿äºå¯¼å…¥å’Œä½¿ç”¨YOLOæ£€æµ‹åŠŸèƒ½ã€‚                                     |

ä»¥ä¸Šè¡¨æ ¼æ•´ç†äº†é¡¹ç›®ä¸­å„ä¸ªæ–‡ä»¶çš„åŠŸèƒ½ï¼Œå¸®åŠ©ç†è§£æ•´ä¸ªç³»ç»Ÿçš„æ„æ¶å’ŒåŠŸèƒ½æ¨¡å—ã€‚

æ³¨æ„ï¼šç”±äºæ­¤åšå®¢ç¼–è¾‘è¾ƒæ—©ï¼Œä¸Šé¢â€œ11.é¡¹ç›®æ ¸å¿ƒæºç è®²è§£ï¼ˆå†ä¹Ÿä¸ç”¨æ‹…å¿ƒçœ‹ä¸æ‡‚ä»£ç é€»è¾‘ï¼‰â€ä¸­éƒ¨åˆ†ä»£ç å¯èƒ½ä¼šä¼˜åŒ–å‡çº§ï¼Œä»…ä¾›å‚è€ƒå­¦ä¹ ï¼Œå®Œæ•´â€œè®­ç»ƒæºç â€ã€â€œWebå‰ç«¯ç•Œé¢â€å’Œâ€œ70+ç§åˆ›æ–°ç‚¹æºç â€ä»¥â€œ13.å®Œæ•´è®­ç»ƒ+Webå‰ç«¯ç•Œé¢+70+ç§åˆ›æ–°ç‚¹æºç ã€æ•°æ®é›†è·å–â€çš„å†…å®¹ä¸ºå‡†ã€‚

### 13.å®Œæ•´è®­ç»ƒ+Webå‰ç«¯ç•Œé¢+70+ç§åˆ›æ–°ç‚¹æºç ã€æ•°æ®é›†è·å–

![19.png](19.png)


# [ä¸‹è½½é“¾æ¥ï¼šhttps://mbd.pub/o/bread/ZpuYlJhy](https://mbd.pub/o/bread/ZpuYlJhy)